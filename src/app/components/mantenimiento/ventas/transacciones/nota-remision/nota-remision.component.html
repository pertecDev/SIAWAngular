<section
style="background-color:#CEFFFF !important;margin-left: 1px;margin-right: 7.5px;flex: 1;box-sizing: border-box;padding: 5px;">
  <ngx-spinner bdColor="rgba(251, 216, 0, 0.8)" size="medium" color="#093070" type="square-loader" [fullScreen]="true">
    <br>
    <p style="font-size: 25px; color: rgb(9,48,112,)">ðŸ”© Cargando... ðŸ”©</p>
  </ngx-spinner>
  <p-toast></p-toast>
  
  <div class="row">
    <div class="col">
      <div class="divTable">
        <div class="input-group-append text-center" style="float: left;">
          <!-- botones -->
          <div class="input-group-append">
            <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1"
              (click)="submitDataNotaRemision(0);">
              <span><i class="fa fa-save" aria-hidden="true" style="color: #7d99c7cc;"></i> Grabar</span>
            </button>
            <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1" type="button"
              (click)="limpiar();">
              <span><i class="fa fa-eraser" aria-hidden="true" style="color: #ffc107;"></i> Limpiar</span>
            </button>
            <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1" type="button"
              (click)="tranferirNotasRemision();">
              <span><i class="fa fa-clone" aria-hidden="true" style="color: #7d99c7;"></i> Transferir</span>
            </button>
          </div>
          <!-- botones - fin -->
          <div class="pt-2" style="padding-left: 23rem;">
            <h3><strong><u>NOTA DE REMISION</u></strong></h3>
          </div>
        </div>

        <div class="input-group-append text-center" style="float: right;">
          <button class="btn btn-outline-secondary form-control-sm" type="button" matTooltip="Matriz Item"
            matTooltipClass="custom-tooltip" matTooltipPosition="above" (click)="modalMatrizProductos()"
            [disabled]="true"> <i class="fa fa-th blue" aria-hidden="true"></i>
          </button>

          <button class="btn btn-outline-secondary form-control-sm" type="button" matTooltip="Validar Negativos"
            matTooltipClass="custom-tooltip" matTooltipPosition="above" (click)="validarProformaSoloNegativos();">
            <i class="fa fa-inbox blue" aria-hidden="true"></i>
          </button>
          <button class="btn btn-outline-secondary form-control-sm" type="button"
            matTooltip="Ver Estado De Cuenta Del Cliente" matTooltipClass="custom-tooltip" matTooltipPosition="above">
            <mat-icon class="blue">photo_size_select_small</mat-icon>
          </button>
          <button class="btn btn-outline-secondary form-control-sm" matTooltip="Verificar Si Cumplen Empaques"
            matTooltipClass="custom-tooltip" matTooltipPosition="above" type="button">
            <i class="fa fa-inbox blue" aria-hidden="true"></i>
          </button>

          <!-- <button class="btn btn-outline-secondary form-control-sm" type="button">
            <i class="fa fa-calculator blue" aria-hidden="true"></i>
          </button>
          <button class="btn btn-outline-secondary form-control-sm" type="button">
            <i class="fa fa-calculator blue" aria-hidden="true"></i>
          </button>
          <button class="btn btn-outline-secondary form-control-sm" type="button">
            <mat-icon class="green"> monetization_on</mat-icon>
          </button> -->
        </div>
      </div>
    </div>
  </div>

  <div>
    <!-- cabecera -->
    <form class="example-form" [formGroup]="FormularioData">
      <div class="mat-elevation-z2 row" style="margin-right: 0px !important;margin-left: 0px !important;">
        <!-- primeraColumna -->
        <div class="col col-lg-3">
          <div class="row">
            <div class="col-md-8" style="padding-right: 0px;padding-left: 6.5px;">
              <div class="input-group">
                <div class="input-group-">
                  <span class="input-group-text form-control-sm" style="padding: 6px 32px 0px 0px;"><u>ID Tipo
                    </u></span>
                </div>

                <input type="text" class="form-control form-control-sm" [ngModel]="cod_id_tipo_modal"
                  style="margin-left: 5px;background-color: black;color: #ffc107;" formControlName="id" readonly>

                <div class="input-group-append">
                  <button class="btn btn-outline-success form-control-sm" type="button" (click)="modalTipoID();"
                    style="border-color: green;" matTooltip="Buscar ID"><i class="fa fa-search"></i>
                  </button>
                </div>
              </div>
            </div>

            <div class="col-md-4" style="padding-right: 6.5px;padding-left: 0px;">
              <div class="input-group">
                <input type="text" class="form-control form-control-sm" formControlName="numeroid"
                  [(ngModel)]="id_proforma_numero_id" style="background-color: black;color: #ffc107;" readonly>
              </div>
            </div>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm" style="padding: 6px 37px 0px 0px;"><u>Fecha</u></span>
            </div>
            <input type="text" class="form-control form-control-sm" style="margin-left: 5px;"
              [(ngModel)]="fecha_actual_format" formControlName="fecha" readonly>
          </div>

          <div class="input-group">
            <div class="input-group-">
              <span class="input-group-text form-control-sm" style="padding: 5px 23px 0px 0px;"><u>Almacen</u></span>
            </div>
            <input type="text" class="form-control form-control-sm" style="margin-left: 5px;"
              formControlName="codalmacen" [(ngModel)]="almacn_parame_usuario_almacen" readonly>

            <div class="input-group-append">
              <button class="btn btn-outline-success form-control-sm" type="button" style="border-color: green;"
                disabled>
                <i class="fa fa-search"></i>
              </button>
            </div>
          </div>

          <div class="input-group">
            <div class="input-group-">
              <span class="input-group-text form-control-sm"
                style="padding: 8px 19px 0px 0px;border: 0 !important;"><u>Vendedor </u></span>
            </div>

            <input type="text" class="form-control form-control-sm" style="margin-left: 5px;"
              formControlName="codvendedor" [ngModel]="cod_vendedor_cliente_modal" readonly>

            <div class="input-group-append">
              <button class="btn btn-outline-success form-control-sm" type="button" style="border-color: green;"
                [disabled]="true"><i class="fa fa-search"></i>
              </button>
            </div>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm" style="padding: 10px 6px 0px 0px;"><u>Tipo de Pago</u>
              </span>
            </div>
            <mat-select class="custom-select1 form-control-sm" [(ngModel)]="tipopago" formControlName="tipopago">
              <mat-option [value]=0>CONTADO</mat-option>
              <mat-option [value]=1>CREDITO</mat-option>
            </mat-select>
          </div>

          <div class="row">
            <div class="col-sm">
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text form-control-sm" style="padding: 8px 32px 0px 0px;"><u>Moneda
                    </u></span>
                </div>
                <input type="text" class="form-control form-control-sm" id="inputMoneda" formControlName="codmoneda"
                  [(ngModel)]="moneda_get_catalogo" placeholder="Moneda" readonly>
              </div>
            </div>

            <div class="col-sm">
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text form-control-sm" style="padding: 10px 0px 0px 0px;"><u>T. de C.
                    </u></span>
                </div>
                <input type="number" class="form-control form-control-sm" style="margin-left: 6px;"
                  formControlName="tdc" [ngModel]="tdc" readonly>
              </div>
            </div>
          </div>
        </div>

        <!-- segundaColumna -->
        <div class="col col-lg-2">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm" style="padding: 10px 1px 0px 6px;"><u>Precio de Ventas</u>
              </span>
            </div>

            <ng-container>
              <input type="text" class="form-control form-control-sm" formControlName="preciovta"
                [(ngModel)]="cod_precio_venta_modal_codigo" style="margin-left: 5px;" readonly>
            </ng-container>

            <div class="input-group-append">
              <button class="btn btn-outline-success form-control-sm" type="button" style="border-color: green;"
                (click)="modalPrecioVenta();" [disabled]="true">
                <i class="fa fa-search"></i>
              </button>
            </div>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm" style="padding: 10px 2px 0px 0px;"><u>Desct. Especiales</u>
              </span>
            </div>

            <ng-container>
              <input type="text" class="form-control form-control-sm" formControlName="cod_descuento"
                [(ngModel)]="cod_descuento_modal_codigo" style="margin-left: 6px;" readonly>
            </ng-container>

            <div class="input-group-append">
              <button class="btn btn-outline-success form-control-sm" type="button" style="border-color: green;"
                (click)="modalDescuentoEspecial();" [disabled]="true">
                <i class="fa fa-search"></i>
              </button>
            </div>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm" style="padding: 10px 0px 0px 32px;"><u>PreparaciÃ³n
                </u></span>
            </div>
            <input type="text" class="form-control form-control-sm" formControlName="preparacion"
              [ngModel]="preparacion" style="margin-left: 5px;" [disabled]="true" readonly>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm" style="padding: 10px 0px 0px 40px;"><u>Estado </u></span>
            </div>
            <select class="custom-select1 form-control-sm" style="margin-left: 24px;"
              [(ngModel)]="estado_contra_entrega_input" formControlName="estado_contra_entrega" readonly>
              <option>YA CANCELO</option>
              <option>POR CANCELAR</option>
            </select>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm" style="padding: 10px 0px 0px 6px;"><u>Solicitud Urgente
                </u></span>
            </div>
            <input type="text" class="form-control form-control-sm" readonly
              style="margin-left: 6px;background-color: #ffffc0;">&nbsp;

            <input type="text" class="form-control form-control-sm" readonly style="background-color: #ffffc0;">
          </div>
        </div>

        <!-- terceraColumna -->
        <div class="col col-lg-2">
          <div class="col-sm">
            <div class="input-group">
              <div class="input-group-prepend">
                <div class="input-group-text" style="border: 0;">
                  <input type="checkbox" style="margin-left: 5px;" formControlName="venta_cliente_oficina"
                    [(ngModel)]="venta_cliente_oficina">
                </div>
              </div>
              <div class="input-group-prepend">
                <span class="input-group-text form-control-sm"><u>Venta Cliente en
                    Oficina</u></span>
              </div>
            </div>
          </div>

          <div class="col-sm">
            <div class="input-group">
              <div class="input-group-prepend">
                <div class="input-group-text" style="border: 0;">
                  <input type="checkbox" style="margin-left: 5px;" formControlName="contra_entrega"
                    [(ngModel)]="contra_entrega">
                </div>
              </div>
              <div class="input-group-prepend">
                <span class="input-group-text form-control-sm"><u>Contra Entrega</u></span>
              </div>
            </div>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm">Total Proforma</span>
            </div>
            <input type="text" class="form-control form-control-sm" style="margin-left: 6px;width: 56px !important;"
              [ngModel]="total_cabecera" formControlName="total_cabecera" readonly>&nbsp;

            <input type="text" class="form-control form-control-sm" [ngModel]="moneda_cabecera"
              formControlName="moneda_cabecera" readonly>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm">Cod. Proforma</span>
            </div>
            <input type="text" class="form-control form-control-sm" [(ngModel)]="codigo_proforma"
              formControlName="codproforma" style="margin-left: 6px;" readonly>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm">ID-NrProforma</span>
            </div>
            <input type="text" class="form-control form-control-sm" formControlName="id_nro_id_proforma_form"
              [(ngModel)]="id_nro_id_proforma" style="margin-left: 6px;" readonly>
          </div>
        </div>

        <div class="col col-lg-2"></div>

        <!-- cuartaColumna -->
        <div class="col col-lg-3" style="float: right;">
          <form class="example-form" [formGroup]="FormularioData">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text form-control-sm" style="padding: 10px 0px 0px 18px;">
                  <u>Cod. Cliente</u></span>
              </div>
              <input type="text" class="form-control cliente form-control-sm" formControlName="codcliente"
                [ngModel]="codigo_cliente" style="margin-left: 7.5px;" readonly>
              <div class="input-group-append">
                <span class="input-group-text form-control-sm" style="cursor: pointer;border:1px !important;">
                  <i class="fa fa-search" aria-hidden="true" style="color: #093070;"></i>
                </span>
              </div>
              <div class="input-group-append">
                <span class="input-group-text form-control-sm" type="button">
                  <i class="fa fa-window-restore" aria-hidden="true" style="color: #093070;border:1px !important;"></i>
                </span>
              </div>
            </div>

            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text form-control-sm" style="padding: 10px 9px 0px 0px"><u>Nombre Cliente
                  </u></span>
              </div>

              <input type="text" class="form-control form-control-sm" formControlName="nomcliente"
                placeholder="Nombre Cliente" [(ngModel)]="nombre_cliente" readonly>
            </div>

            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text form-control-sm" style="padding: 10px 6px 0px 0px"><u>Nombre Factura </u>
                </span>
              </div>

              <input type="text" class="form-control form-control-sm" formControlName="nomcliente"
                [(ngModel)]="nombre_cliente" readonly>
            </div>

            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text form-control-sm" style="padding: 9px 3px 2px 44px;border: 0 !important;">
                  <u> Doc. Id.</u>
                </span>
              </div>

              <mat-select class="custom-select1 form-control-sm" formControlName="tipo_docid" style="margin-left: 3px;"
                [(ngModel)]="tipo_doc_cliente" readonly>
                <mat-option *ngFor="let documento_identidads of documento_identidad"
                  [value]="documento_identidads.codigoclasificador">
                  {{ documento_identidads.codigoclasificador }} - {{ documento_identidads.descripcion }}
                </mat-option>
              </mat-select>
            </div>

            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text form-control-sm" style="padding: 10px 3px 0px 57px;border: 0 !important;">
                  <u> N.I.T</u>
                </span>

                <ng-container *ngIf="razon_social !== 'SIN NOMBRE';">
                  <input type="number" class="form-control form-control-sm" formControlName="nit" placeholder="N.I.T."
                    [(ngModel)]="nit_cliente" style="margin-left: 3px;" [readOnly]="true">
                </ng-container>
              </div>

              <div class="col-sm">
                <ng-container *ngIf="razon_social === 'SIN NOMBRE';">
                  <container-element [ngSwitch]="tipo_doc_cliente">
                    <!-- CI/NIT  VALIDAR QUE SOLO SEAN NUMEROS -->
                    <!-- CEX - CEDULA DE IDENTIDAD EXTRANJERO PAS - PASOPORTE OTRO-DOCUMENTO -->
                    <ng-container *ngSwitchCase="1">
                      <div class="input-group-prepend">
                        <input type="number" class="form-control form-control-sm" placeholder="CI - CEDULA DE IDENTIDAD"
                          style="font-size: 0.55rem !important;width: 80%;" min="0">
                        <input type="text" class="form-control-sm" formControlName="complemento_ci"
                          [(value)]="complemento_ci" style="width: 18%;">
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="2">
                      <input type="text" class="form-control form-control-sm"
                        placeholder="CEX - CÃ‰DULA DE IDENTIDAD DE EXTRANJERO"
                        style="width: 100%;font-size: 0.55rem !important;">
                    </ng-container>
                    <ng-container *ngSwitchCase="3">
                      <input type="text" class="form-control form-control-sm" placeholder="PAS - PASAPORTE"
                        style="font-size: 0.55rem !important;width: 100%;">
                    </ng-container>
                    <ng-container *ngSwitchCase="4">
                      <input type="text" class="form-control form-control-sm"
                        placeholder="OD - OTRO DOCUMENTO DE IDENTIDAD"
                        style="font-size: 0.55rem !important;width: 100%;">
                    </ng-container>
                    <ng-container *ngSwitchCase="5">
                      <input type="number" class="form-control form-control-sm"
                        placeholder="NIT - NÃšMERO DE IDENTIFICACIÃ“N TRIBUTARIA" min="0"
                        style="width: 100%;font-size: 0.55rem !important;">
                    </ng-container>
                  </container-element>
                </ng-container>
              </div>
            </div>

            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text form-control-sm" style="padding: 10px 0px 0px 56px"><u>Email </u></span>
              </div>
              <ng-container *ngIf="!email_cliente">
                <input type="text" class="form-control form-control-sm" formControlName="email"
                  style="margin-left: 4px;" value="facturasventas@pertec.com.bo" style="margin-left: 4px;" readonly>
              </ng-container>

              <ng-container *ngIf="email_cliente">
                <input type="text" class="form-control form-control-sm" formControlName="email"
                  [(ngModel)]="email_cliente" style="margin-left: 4px;" readonly>
              </ng-container>
            </div>
          </form>
        </div>
      </div>
    </form>
    <!-- finCabezera -->

    <!-- inicio Tabla -->
    <div class="row">
      <div class="col" style="padding-right: 2.5px !important;padding-left: 0px !important;">
        <mat-tab-group class="miTabGroupDetalle" #tabGroup>
          <mat-tab label="Detalle del Pedido">
            <p-table [value]="array_items_carrito_y_f4_catalogo" styleClass="p-datatable-striped tablitaDetalle"
              [metaKeySelection]="true" selectionMode="multiple" [(selection)]="selectedProducts" dataKey="coditem"
              sortMode="multiple" (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)"
              style="overflow-y: scroll;overflow-x: scroll;">
              <ng-template pTemplate="header">
                <tr style="cursor: pointer;">
                  <th pSortableColumn="orden" class="center1" style="width:3%;">
                    Orden
                  </th>
                  <th pSortableColumn="item" style="width:5%;" class="left1">
                    <u>Item</u>
                    <p-sortIcon field="item" />
                  </th>
                  <th pSortableColumn="descripcion" style="width:20%;" class="left1">
                    DescripciÃ³n
                    <p-sortIcon field="descripcion" />
                  </th>
                  <th pSortableColumn="medida" class="center1" style="width:7%">
                    Medida
                  </th>
                  <th pSortableColumn="ud" class="center1" style="width:4%">
                    Ud
                  </th>
                  <th pSortableColumn="iva" class="center1" style="width:2%">
                    %IVA
                  </th>
                  <th pSortableColumn="cantidad" class="right1" style="width:6%">
                    Cantidad
                    <p-sortIcon field="cantidad" />
                  </th>
                  <th pSortableColumn="sld" class="center1" style="width:5%;">
                    % SLD
                  </th>
                  <th pSortableColumn="TP" class="center1" style="width:4%">
                    TP
                    <p-sortIcon field="TP" />
                  </th>
                  <th pSortableColumn="DE" class="center1" style="width:4%">
                    DE
                    <p-sortIcon field="DE" />
                  </th>
                  <th pSortableColumn="PUL" class="right1" style="width:4%">
                    PUL
                  </th>
                  <th pSortableColumn="NIV" class="right1" style="width:4%">
                    NIV
                  </th>
                  <th pSortableColumn="PD" class="right1" style="width:6%">
                    PD
                  </th>
                  <th pSortableColumn="PU" class="right1" style="width:6%">
                    PU
                  </th>
                  <th pSortableColumn="%" class="right1" style="width:6%">
                    Total
                    <p-sortIcon field="Total" />
                  </th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-products let-rowIndex="rowIndex">
                <tr [pSelectableRow]="products" [pSelectableRowIndex]="rowIndex" [ngStyle]="{height: '10px'}"
                  (click)="itemDataAll(products?.coditem)">
                  <td class="center1"> {{ products.orden }} </td>
                  <td class="left1"> {{ products.coditem }} </td>
                  <td class="left1"> {{ products.descripcion }} </td>
                  <td class="left1"> {{ products.medida }} </td>
                  <td class="center1"> {{ products.udm }} </td>
                  <td class="center1"> {{ products.porceniva }} </td>

                  <!-- COLUMNA CANTIDAD -->
                  <td class="right1" [pEditableColumn]="products.cantidad" pEditableColumnField="cantidad">
                    <p-cellEditor>
                      <ng-template pTemplate="input">
                        <input pInputText type="number" [(ngModel)]="products.cantidad" min="0" id="input_cantidad"
                          (change)="cantidadChangeMatrix(products, $event.target.value);">
                      </ng-template>

                      <ng-template pTemplate="output">
                        <ng-container *ngIf="products?.cumple === false">
                          <!-- NEGATIVOS -->
                          <span style="color: #5050e2 !important;font-weight: 900;">{{ products.cantidad }}</span> 
                        </ng-container>
                        <ng-container *ngIf="products?.cumple === true">
                          <!-- NEGATIVOS -->
                          {{ formatNumberTotalSubTOTALES(products.cantidad) }}
                        </ng-container>
                      </ng-template>
                    </p-cellEditor>
                  </td>

                  <td class="center1">{{ products.porcen_mercaderia }}</td>
                  <td class="center1"> {{ products.codtarifa }} </td>
                  <td class="center1"> {{ products?.coddescuento }} </td>
                  <td class="right1">{{ products.preciolista }}</td>
                  <td class="right1">{{ products.niveldesc }}</td>
                  <!-- <td class="right1">{{ products.porcendesc  | json}}</td> -->
                  <td class="right1">
                    {{ products.preciodesc?.toString()?.replace(',', '.') }}</td>
                  <td class="right1">
                    {{ products.precioneto?.toString().replace(',', '.') }}</td>
                  <td class="right1">
                    {{  calcularTotalCantidadXPU(products?.cantidad_pedida, products?.cantidad, products?.precioneto) }}
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </mat-tab>

          <mat-tab label="Negativos">
            <table mat-table [dataSource]="dataSource_negativos" class="mat-elevation-z8" matSort>
              <!-- kit Column -->
              <ng-container matColumnDef="kit">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Kit </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.kit }}</td>
              </ng-container>

              <!-- NÂ° Parte Column -->
              <ng-container matColumnDef="nro_partes">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"> NÂ° Parte</th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.nro_partes }}</td>
              </ng-container>

              <!-- Cod. Item Conjunto Column -->
              <ng-container matColumnDef="coditem_cjto">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Cod. Item Conjunto</th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.coditem_cjto }}
                </td>
              </ng-container>

              <!-- Cod. Item Conjunto Column -->
              <ng-container matColumnDef="coditem_suelto">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Cod. Item Suelto</th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.coditem_suelto }}
                </td>
              </ng-container>

              <!-- Cod. Item Conjunto Column -->
              <ng-container matColumnDef="codigo">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Cod. Item</th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.codigo }}</td>
              </ng-container>

              <!-- Cod. Item Conjunto Column -->
              <ng-container matColumnDef="descitem">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> DescripciÃ³n - Medida
                </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: left !important; padding: 0 0px 0 0px !important">{{ element.descitem }}</td>
              </ng-container>

              <!-- Cantidad Column -->
              <ng-container matColumnDef="cantidad">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Cant. </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos" style="text-align: center !important; padding: 0 0px 0 0px
                !important">{{ element.cantidad | number: '1.2-2' }}</td>
              </ng-container>

              <!-- Cantidad Pedida en Conjunto Column -->
              <ng-container matColumnDef="cantidad_conjunto">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Cant. Pedida en
                  Conjunto </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos" style="text-align: right !important; padding: 0 0px 0 0px
                !important">{{ element.cantidad_conjunto | number: '1.2-2' }}
                </td>
              </ng-container>

              <!-- CSaldo Real Column -->
              <ng-container matColumnDef="saldo_sin_descontar_reservas">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Saldo Real </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: right !important;">
                  {{ element.saldo_sin_descontar_reservas | number: '1.2-2'}}</td>
              </ng-container>

              <!-- Cantidad Pedida en Suelto Column -->
              <ng-container matColumnDef="cantidad_suelta">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Cant. Pedida en Suelto
                </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: right !important; padding: 0px 2px 0px 9px !important;">
                  {{ element.cantidad_suelta | number: '1.2-2' }}
                </td>
              </ng-container>

              <!-- Cantidad Reserva Conjunto Column -->
              <ng-container matColumnDef="cantidad_reservada_para_cjtos">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important">Cant. Reserva Conjunto
                </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: right !important;">
                  {{ element.cantidad_reservada_para_cjtos | number: '1.2-2'}}</td>
              </ng-container>

              <!-- Cantidad Reserva Conjunto Column -->
              <ng-container matColumnDef="saldo_descontando_reservas">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important">Saldo Para Venta Suelta
                </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: right !important;">
                  {{ element.saldo_descontando_reservas | number: '1.2-2'}}</td>
              </ng-container>

              <!-- Observacion Column -->
              <ng-container matColumnDef="obs">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important">Obs. </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">
                  <ng-container *ngIf="element.obs === 'Genera Negativo'; else obs1 ">
                    <strong style="color: red;">{{ element.obs }}</strong>
                  </ng-container>
                  <ng-template #obs1>
                    <strong style="color: green;">{{ element.obs }}</strong>
                  </ng-template>

                </td>
              </ng-container>

              <mat-header-row *matHeaderRowDef="displayedColumnsNegativos"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumnsNegativos;"></mat-row>
            </table>

            <div class="row fixed-bottom-bar" style="background-color: #000000 !important;">
              <div class="col-md" style="float: left;">
                <mat-slide-toggle (click)="negativosTodosFilterToggle()" [checked]="toggleTodosNegativos">
                  <span style="color:#ff8000 !important">Todos los Items</span>
                </mat-slide-toggle>
              </div>
              <div class="col-md" style="float: left;">
                <mat-slide-toggle (click)="negativosPositivosFilterToggle()" [checked]="togglePositivos">
                  <span style="color:#ff8000 !important">Solo Items NO Generan Saldos Negativos</span>
                </mat-slide-toggle>
              </div>
              <div class="col-md" style="float: left;">
                <mat-slide-toggle (click)="negativosNegativosFilterToggle()" [checked]="toggleNegativos"><span
                    style="color:#ff8000 !important">Saldo
                    Items Que SI Generan Saldos Negativos</span>
                </mat-slide-toggle>
              </div>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
    </div>
    <!-- FinTabla -->

    <!-- inicioPiePagina -->
    <div>
      <div class="row">
        <div class="col-md-10">
          <mat-tab-group class="miTabGroupProformaFooter" style="border-style: ridge;padding: 1px;" #tabGroupfooter>
            <mat-tab label="Datos">
              <form class="example-form" [formGroup]="FormularioData">
                <div class="row">
                  <div class="col-md-6">
                    <div class="row">
                      <div class="input-group">
                        <span class="input-group-text form-control-sm"
                          style="padding: 10px 0px 0px 41px;border: 0 !important;"><u>Transporte</u>
                        </span>

                        <input type="text" class="form-control form-control-sm" formControlName="transporte"
                          [(ngModel)]="transporte" style="margin-left: 5px;" readonly>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-6">
                    <div class="input-group">
                      <span class="input-group-text form-control-sm"
                        style="padding: 10px 0px 0px 0px;border: 0 !important;"><u>Nombre
                          Transporte</u>
                      </span>

                      <input type="text" class="form-control form-control-sm" formControlName="nombre_transporte"
                        [(ngModel)]="medio_transporte" style="margin-left: 5px;" readonly>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md">
                    <div class="row">
                      <div class="col-md-5">
                        <div class="input-group">
                          <span class="input-group-text form-control-sm"
                            style="padding: 10px 0px 0px 0px;border: 0 !important;"><u>Flete Pagado Por</u>
                          </span>

                          <input type="text" class="form-control form-control-sm" formControlName="fletepor"
                            [(ngModel)]="fletepor" style="margin-left: 5px;" readonly>
                        </div>
                      </div>
                      <div class="col-md-5">
                        <div class="input-group">
                          <span class="input-group-text form-control-sm"
                            style="padding: 10px 0px 0px 0px;border: 0 !important;"><u>T. Entrega</u>
                          </span>

                          <input type="text" class="form-control form-control-sm" style="margin-left: 5px;"
                            formControlName="tipoentrega" [ngModel]="tipoentrega" readonly>
                        </div>
                      </div>
                      <div class="col-md-2">
                        <div class="input-group">
                          <span class="input-group-text form-control-sm"
                            style="padding: 10px 0px 0px 0px;border: 0 !important;">Peso Total:
                            {{ peso | number:'2.2-2' }} Kgr.
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md">
                    <div class="row">
                      <div class="col-md-3">
                        <div class="input-group">
                          <span class="input-group-text form-control-sm"
                            style="padding: 10px 0px 0px 53px;border: 0 !important;"><u>Latitud</u>
                          </span>

                          <input type="number" placeholder="-0.000000" style="margin-left: 7px;"
                            formControlName="latitud_entrega" [(ngModel)]="latitud_cliente" readonly>
                        </div>
                      </div>

                      <div class="col-md-3">
                        <div class="input-group">
                          <span class="input-group-text form-control-sm"
                            style="padding: 10px 0px 0px 0px;border: 0 !important;"><u>Longitud</u>
                          </span>

                          <input type="number" placeholder="-0.000000" style="margin-left: 5px;"
                            formControlName="longitud_entrega" [(ngModel)]="longitud_cliente" readonly>
                        </div>
                      </div>

                      <a href="{{ URL_maps }}" target="_blank" style="padding-top: 6px;">
                        <mat-icon> my_location</mat-icon>
                      </a>

                      <div class="col-md-5">
                        <div class="input-group">
                          <span class="input-group-text form-control-sm"
                            style="padding: 10px 0px 0px 47px;border: 0 !important;"><u>UbicaciÃ³n</u>
                          </span>
                          <input type="text" class="form-control form-control-sm" [(ngModel)]="central_ubicacion"
                            formControlName="ubicacion" style="margin-left: 5px;" readonly>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md">
                    <div class="row">
                      <div class="input-group">
                        <span class="input-group-text form-control-sm"
                          style="height: calc(1.3rem + 5px) !important;padding: 0px 0px 0px 48px;border: 0 !important;">
                          <u>DirecciÃ³n</u></span>

                        <input class="form-control form-control-sm" formControlName="direccion"
                          [(ngModel)]="direccion_central_input" style="margin-left: 6px;" readonly>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md">
                    <div class="row">
                      <div class="input-group">
                        <span class="input-group-text form-control-sm"
                          style="height: calc(1.3rem + 1px) !important;padding: 10px 0px 0px 32px;border: 0 !important;">
                          <u>ObservaciÃ³n</u>
                        </span>

                        <input class="form-control form-control-sm" id="exampleFormControlTextarea1"
                          style="margin-left: 5px;" formControlName="obs" [(ngModel)]="obs" readonly>
                      </div>
                    </div>
                  </div>

                  <div class="col-md">
                    <div class="row">
                      <div class="input-group">
                        <span class="input-group-text form-control-sm"
                          style="padding: 10px 0px 0px 10px;border: 0 !important;"><u>Orden de Compra</u></span>

                        <input type="text" class="form-control form-control-sm" [(ngModel)]="odc" readonly>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </mat-tab>

            <mat-tab label="Descuentos de Linea de Cliente"><br>
              <div class="row">
                <div class="col-md-4">
                  <div class="row">
                    <div class="input-group">
                      <span class="input-group-text form-control-sm"
                        style="padding: 10px 0px 0px 10px;border: 0 !important;">
                        <u>Aplicar Descuentos de Nivel Actuales del Cliente: </u>&nbsp;
                      </span>

                      <input type="text" class="form-control form-control-sm" [(ngModel)]="nivel_descuento"
                        [disabled]="true">
                    </div>
                  </div>
                </div>
              </div>
            </mat-tab>

            <mat-tab label="Solicitud Descuentos de Linea"><br>
              <form class="example-form" [formGroup]="FormularioData">
                <div class="row">
                  <div class="col-md-4 p-2">
                    <div class="row">
                      <div class="input-group" style="margin-left: 28px;">
                        <input type="checkbox" [(ngModel)]="desclinea_segun_solicitud" [disabled]="true"
                          formControlName="desclinea_segun_solicitud" readonly>
                        {{ desclinea_segun_solicitud }}
                        <span class="input-group-text form-control-sm" style="padding: 2px 1px 0px 20px;">
                          Habilitar Descuento de Linea Segun Solicitud
                        </span>
                      </div><br>

                      <div class="input-group">
                        <span class="input-group-text form-control-sm" style="padding: 7px 4px 0px 19px;">
                          <u>ID Tipo</u>
                        </span>
                        <input type="text" class="form-control form-control-sm"> &nbsp;
                        <input type="text" class="form-control form-control-sm">
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </mat-tab>

            <mat-tab label="Complementar Proforma"><br>
              <div class="row">
                <div class="col-md-4">
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text form-control-sm"
                        style="padding: 0px 8px 6px 5px;;border: 0 !important;">
                        <u>Complementar Proforma</u></span>
                    </div>

                    <mat-slide-toggle class="example-margin" [(ngModel)]="disableSelectComplemetarProforma"
                      (change)="habilitarComplementarProforma()">
                    </mat-slide-toggle>
                    <!-- Valor: {{ disableSelectComplemetarProforma }} -->
                  </div>
                </div>

                <div class="col-md-8">
                  <form class="example-form" [formGroup]="FormularioData">
                    <mat-label>Eliga una OpciÃ³n</mat-label>
                    <mat-select class="custom-select1 form-control-sm" [disabled]="!disableSelectComplemetarProforma"
                      [(ngModel)]="tipo_complementopf_input" formControlName="tipo_complementopf">

                      <mat-option [value]=3>Elija una opcion...</mat-option>
                      <mat-option [value]=0>1. Dimediado - Precio Mayorista Para Cumplir
                        Monto Minimo
                      </mat-option>
                      <mat-option [value]=1>2. Para Cumplir Monto Minimo Para Aplicar
                        Descuento Extra
                      </mat-option>
                    </mat-select>

                    <!-- VALOR:{{ tipo_complementopf_input }} -->

                    <div class="input-group">
                      <mat-select class="custom-select1 form-control-sm" [(ngModel)]="idpf_complemento_view"
                        formControlName="idpf_complemento" [disabled]="!disableSelectComplemetarProforma">
                        <mat-option *ngFor="let ids_complementar_proformas of ids_complementar_proforma"
                          [value]="ids_complementar_proformas.id">
                          {{ ids_complementar_proformas.id }} -
                          {{ ids_complementar_proformas.descripcion }}
                        </mat-option>
                      </mat-select>

                      <input type="number" class="form-control form-control-sm" style="margin-left: 5px;"
                        formControlName="nroidpf_complemento" placeholder="0"
                        [disabled]="!disableSelectComplemetarProforma" [(ngModel)]="nroidpf_complemento_view">

                      <div class="input-group-append">
                        <button class="btn btn-outline-primary form-control-sm" type="button"
                          style="border-color: #ffc107;" [disabled]="!disableSelectComplemetarProforma"
                          (click)="buscadorIDComplementarProforma(idpf_complemento_view, nroidpf_complemento_view);">
                          <i class="fa fa-search"></i>
                        </button>
                      </div>
                    </div>

                    <div class="input-group">
                      <div class="input-group-prepend">
                        <span class="input-group-text form-control-sm" style="border: 0 !important;">
                          <u>Fecha Aut
                            Proforma:
                          </u></span>{{ complemento_proforma?.fechaaut_pfcomplemento | date:'yyyy-mm-dd'}}
                      </div>
                    </div>

                    <div class="input-group">
                      <div class="input-group-prepend">
                        <span class="input-group-text form-control-sm" style="border: 0 !important;">
                          <u>SubTotal Proforma: </u></span>
                        {{ complemento_proforma?.subtotal_pfcomplemento | number:'1.2-2' }}
                      </div>
                    </div>

                    <div class="input-group">
                      <div class="input-group-prepend">
                        <span class="input-group-text form-control-sm" style="border: 0 !important;">
                          <u>Total Proforma: </u></span>
                        {{  complemento_proforma?.total_pfcomplemento | number:'1.2-2'}}
                        {{ complemento_proforma?.moneda_total_pfcomplemento }}
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </mat-tab>

            <mat-tab label="Anticipo Venta Contado"><br>
              <form class="example-form" [formGroup]="FormularioData">
                <div class="col-md-3">
                  <div class="input-group">
                    <span class="input-group-text form-control-sm" style="border: 0 !important;">
                      <u>El Pago Se Realiza De Forma Anticipada</u>
                    </span>
                    <input type="checkbox" class="form-control form-control-sm" style="margin-left: 5px;"
                      [(ngModel)]="pago_contado_anticipado">

                  </div>
                </div>
              </form>
            </mat-tab>

            <mat-tab label="Precios - Descuento Especial"><br>
              <form class="example-form" [formGroup]="FormularioData">
                <div class="row p-2">
                  <input type="text" style="margin-left: 5px;" disabled>
                </div>

                <div class="row p-2">
                  <button class="btn btn-outline-primary form-control-sm" type="button"
                    style="background-color: #ffff00;font-size: 0.7rem !important;padding: 0rem 0.12rem !important;">
                    <i class="fa fa-check"></i> Obtener El Precio Que Tiene Monto Min Mayor.
                  </button>

                  <button class="btn btn-outline-primary form-control-sm" type="button" [disabled]="true"
                    style="background-color: #ffff00;font-size: 0.7rem !important;padding: 0rem 0.12rem !important;">
                    <i class="fa fa-plus"></i> Aplicar Descto. Especial Segun Tipo Precio.
                  </button>

                  <button class="btn btn-outline-primary form-control-sm" type="button" [disabled]="true"
                    style="background-color: #ffff00;font-size: 0.7rem !important;padding: 0rem 0.12rem !important;">
                    <i class="fa fa-eraser"></i> Borrar Descto. Especial.
                  </button>

                  <button class="btn btn-outline-primary form-control-sm" type="button" [disabled]="true"
                    style="background-color: #ffff00;font-size: 0.7rem !important;padding: 0rem 0.12rem !important;">
                    <i class="fa fa-random"></i> Validar Empaque de Descto. Especial
                  </button>

                  <button class="btn btn-outline-primary form-control-sm" type="button"
                    style="background-color: #ffff00;font-size: 0.7rem !important;padding: 0rem 0.12rem !important;">
                    <i class="fa fa-cogs"></i> Validar Descuentos Aplicados
                  </button>
                </div>

                <!-- 
                <input type="text" [(ngModel)]="fecha" formControlName="fecha">
                <input type="text" [ngModel]="fecha_reg" formControlName="fechareg">
                <input type="text" [(ngModel)]="fecha_confirmada" formControlName="fecha_confirmada">
                <input type="text" [(ngModel)]="fechaaut" formControlName="fechaaut">
                <input type="text" [(ngModel)]="fecha_inicial" formControlName="fecha_inicial">
                <input type="text" [ngModel]="horareg" formControlName="horareg">
                <input type="text" [(ngModel)]="hora" formControlName="hora">
                <input type="text" [(ngModel)]="usuarioreg" formControlName="usuarioreg">
                <input type="text" [ngModel]="horaaut" formControlName="horaaut">
                <input type="text" [(ngModel)]="hora_inicial" formControlName="hora_inicial">
                <input type="text" [(ngModel)]="hora_confirmada" formControlName="hora_confirmada">


                <input type="text" [(ngModel)]="complemento_proforma" formControlName="complemento_proforma">
                <input type="number" [(ngModel)]="peso" formControlName="peso">
                <input type="text" [(ngModel)]="codcliente_real" formControlName="codcliente_real"> -->


                <input type="text" [(ngModel)]="fecha_actual_server" formControlName="fecha" readonly hidden>
                <input type="text" [ngModel]="fecha_actual_server" formControlName="fechareg" readonly hidden>
                <input type="text" [(ngModel)]="fecha_actual_server" formControlName="fecha_confirmada" readonly hidden>
                <input type="text" [(ngModel)]="fecha_actual_server" formControlName="fechaaut" readonly hidden>
                <input type="text" [(ngModel)]="fecha_actual_server" formControlName="fecha_inicial" readonly hidden>
                <input type="text" [ngModel]="hora_fecha_server" formControlName="horareg" readonly hidden>
                <input type="text" [(ngModel)]="hora_fecha_server" formControlName="hora" readonly hidden>
                <input type="text" [(ngModel)]="usuarioLogueado" formControlName="usuarioreg" readonly hidden>
                <input type="text" [ngModel]="hora_fecha_server" formControlName="horaaut" readonly hidden>
                <input type="text" [(ngModel)]="hora_fecha_server" formControlName="hora_inicial" readonly hidden>
                <input type="text" [(ngModel)]="hora_fecha_server" formControlName="hora_confirmada" readonly hidden>

                <input type="text" [(ngModel)]="complemento_proforma" formControlName="complemento_proforma" readonly
                  hidden>
                <input type="number" [(ngModel)]="peso" formControlName="peso" readonly hidden>
                <input type="text" [(ngModel)]="codigo_cliente_catalogo_real" formControlName="codcliente_real" readonly>

                <input type="text" [(ngModel)]="estado_contra_entrega_input" formControlName="estado_contra_entrega"
                  readonly hidden>
                <input type="text" [(ngModel)]="contra_entrega" formControlName="contra_entrega" readonly hidden>
                <input type="number" [(ngModel)]="descuento_total" formControlName="descuento_total" readonly hidden>
              </form>

              <input type="text" [(ngModel)]="codcliente_real_descripcion" hidden>
            </mat-tab>
          </mat-tab-group>
        </div>

        <!-- inicioTotales -->
        <div class="col-md-2" style="padding-block-start: 2px;">
          <form class="example-form" [formGroup]="FormularioData">
            <div class="row" style="height: calc(1.4rem + 2px) !important;">
              <div class="col">
                <span class="input-group-text form-control-sm"
                  style="border: 0 !important;padding: 5px 0px 0px 0px;"><u>Sub
                    Total</u>
                </span>
              </div>

              <div class="col text-right" style="border: 1px #6c757d solid;border-radius: 6px;">
                <span>{{ (formatNumberTotalSubTOTALES(subtotal) ) }}</span>
                <input type="text" [(ngModel)]="subtotal" formControlName="subtotal" [hidden]="true">
              </div>

              <div class="col text-right">
                <button class="btn btn-outline-primary form-control-sm" type="button"
                  style="border-color: green;color: green;" (click)="modalSubTotal();">
                  <mat-icon>monetization_on</mat-icon>
                </button>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <span class="input-group-text form-control-sm"
                  style="padding: 5px 0px 0px 0px;border: 0 !important;"><u>Recargos</u></span>
              </div>
              <div class="col text-right" style="border: 1px #6c757d solid;border-radius: 6px;">
                <span>{{ formatNumberTotalSubTOTALES(recargos) }} </span>
                <input type="text" [(ngModel)]="recargos" formControlName="recargos" [hidden]="true">
              </div>
              <div class="col text-right">
                <button class="btn btn-outline-primary form-control-sm" type="button"
                  style="border-color: green;color: green;">
                  <!-- [disabled]="total === 0" -->
                  <mat-icon>monetization_on</mat-icon>
                </button>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <span class="input-group-text form-control-sm"
                  style="padding: 0px 0px 0px 0px;border: 0 !important;"><u>Descuento</u></span>
              </div>
              <div class="col text-right" style="border: 1px #6c757d solid;border-radius: 6px;">
                <span> {{ formatNumberTotalSubTOTALES(des_extra) }}</span>
                <!-- <input type="number" [(ngModel)]="des_extra" formControlName="des_extra" hidden="true"> -->
              </div>
              <div class="col text-right">
                <button class="btn btn-outline-primary form-control-sm" type="button"
                  style="border-color: green;color: green;">
                  <mat-icon>monetization_on</mat-icon>
                </button>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <span class="input-group-text form-control-sm"
                  style="padding: 5px 0px 0px 0px;border: 0 !important;"><u>IVA</u></span>
              </div>
              <div class="col text-right" style="border: 1px #6c757d solid;border-radius: 6px;">
                <span>{{ formatNumberTotalSubTOTALES(iva) }}</span>
                <input type="text" [(ngModel)]="iva" formControlName="iva" [hidden]="true">
              </div>
              <div class="col text-right">
                <button class="btn btn-outline-primary form-control-sm" type="button"
                  style="border-color: green;color: green;" (click)="modalIva();">
                  <mat-icon>monetization_on</mat-icon>
                </button>
              </div>
            </div>

            <div class="row" style="height: calc(1.4rem + 2px) !important;">
              <div class="col">
                <span class="input-group-text form-control-sm"
                  style="padding: 5px 0px 0px 0px;border: 0 !important;"><u>Total</u></span>
              </div>
              <div class="col text-right" style="border: 1px #6c757d solid;border-radius: 6px;">
                <span>{{ formatNumberTotalSubTOTALES(total) }}</span>
                <input type="text" [(ngModel)]="total" formControlName="total" [hidden]="true">
              </div>
              <div class="col text-right">
                <button class="btn btn-outline-primary form-control-sm" type="button"
                  style="border-color: green;color: green;" (click)="totabilizar();">
                  <mat-icon>monetization_on</mat-icon>
                </button>
              </div>
            </div>

            <div style="text-align: center;">
              <input type="checkbox" [(ngModel)]="es_venta" [value]="true" formControlName="es_venta"
                readonly><span>&nbsp; Es Venta</span>
            </div>
          </form>
        </div>
        <!-- finTotales -->
      </div>

      <div mat-dialog-footer class="footersito">
        <div class="row">
          <div class="col-md-10">
            <!-- Saldos -->
            <div class="row pl-2">
              <input type="text" class="inputsSaldos inputsSaldos2"
                value="{{ almacn_parame_usuario_almacen }}: {{ saldoItem | number:'1.2-2'}}"
                style="font-size: 0.8rem;width:9%;background-color: black;color: rgb(230, 230, 0);" [readOnly]="true"
                placeholder="0.00">

              <ng-container *ngFor="let almacenes_saldoss of almacenes_saldos">
                <span style="padding: 3px 5px 0px 3px;"><strong>{{ almacenes_saldoss.codalmsald1 }}:</strong></span>
                <input type="text" class="inputsSaldos inputsSaldos2" [ngModel]="saldo_modal_total_1 | number:'1.2-2'"
                  style="font-size: 0.8rem;width:7%;background-color: black;color: #00c600;cursor: pointer;"
                  (click)="modalSaldos(almacenes_saldoss.codalmsald1, 1);" [readOnly]="true" placeholder="0.00">

                <span style="padding: 3px 5px 0px 3px;"><strong>{{ almacenes_saldoss.codalmsald2 }}:</strong></span>
                <input type="text" class="inputsSaldos inputsSaldos2" [ngModel]="saldo_modal_total_2 | number:'1.2-2'"
                  style="font-size: 0.8rem;width:7%;background-color: black;color: #00c600;cursor: pointer;"
                  (click)="modalSaldos(almacenes_saldoss.codalmsald2, 2);" [readOnly]="true" placeholder="0.00">

                <span style="padding: 3px 5px 0px 3px;"><strong>{{ almacenes_saldoss.codalmsald3 }}:</strong></span>
                <input type="text" class="inputsSaldos inputsSaldos2" [ngModel]="saldo_modal_total_3 | number:'1.2-2'"
                  style="font-size: 0.8rem;width:7%;background-color: black;color: #00c600;cursor: pointer;"
                  (click)="modalSaldos(almacenes_saldoss.codalmsald3, 3);" [readOnly]="true" placeholder="0.00">

                <span style="padding: 3px 5px 0px 3px;"><strong>{{ almacenes_saldoss.codalmsald4 }}:</strong></span>
                <input type="text" class="inputsSaldos inputsSaldos2" [ngModel]="saldo_modal_total_4 | number:'1.2-2'"
                  style="font-size: 0.8rem;width:7%;background-color: black;color: #00c600;cursor: pointer;"
                  (click)="modalSaldos(almacenes_saldoss.codalmsald4, 4);" [readOnly]="true" placeholder="0.00">

                <span style="padding: 3px 5px 0px 3px;"><strong>{{ almacenes_saldoss.codalmsald5 }}:</strong></span>
                <input type="text" class="inputsSaldos inputsSaldos2" [ngModel]="saldo_modal_total_5 | number:'1.2-2'"
                  style="font-size: 0.8rem;width:7%;background-color: black;color: #00c600;cursor: pointer;"
                  (click)="modalSaldos(almacenes_saldoss.codalmsald5, 5);" [readOnly]="true" placeholder="0.00">
              </ng-container>
            </div>
            <!-- finSaldos -->
          </div>
        </div>

        <!-- Empaques Minimo-->
        <div class="row">
          <div class="input-group" style="width: 65% !important;">
            <span class="input-group-text form-control-sm">Empaque Minimo</span>

            <div type="text" class="form-control form-control-sm inputsSaldos"
              style="width: 1% !important;text-align: right;">
              {{ item_obtenido.empaqueminimo }}
            </div> &nbsp;|&nbsp;

            <span class="input-group-text form-control-sm">Peso Minimo</span>
            <div type="text" class="form-control form-control-sm inputsSaldos"
              style="width: 1% !important;text-align: right;">
              {{ item_obtenido.pesominimo | number:'1.3-3' }}
            </div>

            <ng-container *ngIf="item_obtenido.penalizadoText === '';else penalizado">
              <div type="text" class="form-control form-control-sm inputsSaldos"
                style="width: 1% !important;text-align: right;">
                no penalizado
              </div> &nbsp;|&nbsp;
            </ng-container>

            <ng-template #penalizado>
              <div type="text" class="form-control form-control-sm inputsSaldos"
                style="width: 1% !important;text-align: right;">
                {{ item_obtenido.penalizadoText }}
              </div> &nbsp;|&nbsp;
            </ng-template>

            <div type="text" class="form-control form-control-sm inputsSaldos"
              style="width: 8.5% !important;text-align: center;">
              {{ porcen_item }}
            </div>
          </div>
        </div>
        <!-- finempaque Minimo-->
      </div><br>
    </div>
    <!-- finpiePagina -->
  </div>
</section>
