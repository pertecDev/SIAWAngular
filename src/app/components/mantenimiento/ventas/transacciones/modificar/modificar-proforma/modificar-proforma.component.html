<section
  style="background-color:#ffffc0;margin-left: 1px;margin-right: 7.5px;flex: 1;box-sizing: border-box">

  <ngx-spinner bdColor="rgba(251, 216, 0, 0.8)" size="medium" color="#093070" type="square-loader" [fullScreen]="true">
    <br>
    <p style="font-size: 25px; color: rgb(9,48,112,)">ðŸ”© Cargando... ðŸ”©</p>
  </ngx-spinner>

  <p-toast></p-toast>

  <div class="row mb-1">
    <div class="col">
      <div class="divTable">
        <div class="input-group-append text-center" style="float: left;">
          <!-- BOTONES -->
          <div class="input-group-append">
            <!-- BTN GRABAR -->
            <div>
              <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1" (click)="alMenu();">
                <span><i class="fa fa-arrow-left" style="color: #ffc107;"></i> Menu</span>
              </button> | &nbsp;

              <ng-container
                *ngIf="estado_proforma === 'TRANSFERIDA' || estado_proforma === 'APROBADA' || estado_proforma=== 'ANULADA';else trsf">
                <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1"
                  (click)="submitDataModificarProforma();" disabled>
                  <span><i class="fa fa-save" aria-hidden="true" style="color: #7d99c7;"></i> Grabar</span>
                </button>
              </ng-container>
              <ng-template #trsf>
                <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1"
                  (click)="submitDataModificarProforma();">
                  <span><i class="fa fa-save" aria-hidden="true" style="color: #7d99c7;"></i> Grabar</span>
                </button>
              </ng-template>
            </div>

            <!-- BTN GRABAR Y APROBAR -->
            <div>
              <ng-container
                *ngIf="estado_proforma === 'TRANSFERIDA' || estado_proforma === 'APROBADA' || estado_proforma=== 'ANULADA';else grbapr">
                <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1"
                  (click)="validarAntesDeGrabarAprobar();" disabled>
                  <span>
                    <mat-icon
                      style="color: #ffc107;font-size: 0.9rem !important;height: 13px !important;width: 16px !important;">
                      done_outline</mat-icon>Grabar y Aprobar
                  </span>
                </button>
              </ng-container>
              <ng-template #grbapr>
                <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1"
                  (click)="validarAntesDeGrabarAprobar();" disabled>
                  <span>
                    <mat-icon
                      style="color: #ffc107;font-size: 0.9rem !important;height: 13px !important;width: 16px !important;">
                      done_outline</mat-icon>Grabar y Aprobar
                  </span>
                </button>
              </ng-template>
            </div>

            <!-- BTN ANULAR -->
            <div>
              <ng-container *ngIf="estado_proforma === 'TRANSFERIDA' || estado_proforma === 'APROBADA';else anld">
                <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1"
                  (click)="anularProformar();" disabled>
                  <span>
                    <mat-icon
                      style="color: #ff0707;font-size: 0.9rem !important;height: 13px !important;width: 16px !important;">
                      highlight_off</mat-icon>Anular
                  </span>
                </button>
              </ng-container>
              <ng-template #anld>
                <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1"
                  (click)="anularProformar();">
                  <span>
                    <mat-icon
                      style="color: #ff0707;font-size: 0.9rem !important;height: 13px !important;width: 16px !important;">
                      highlight_off</mat-icon>Anular
                  </span>
                </button>
              </ng-template>
            </div>

            <!-- BTN VALIDAR -->
            <div>
              <ng-container *ngIf="estado_proforma === 'ANULADA'">
                <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1" type="button"
                  matTooltip="La Proforma es: ANULADA por tanto NO SE PUEDE VALIDAR" matTooltipClass="custom-tooltip"
                  matTooltipPosition="above" disabled="true">
                  <span> <i class="fa fa-check" aria-hidden="true" style="color: #05970c;"></i> Validar</span>
                </button>
              </ng-container>

              <ng-container *ngIf="estado_proforma === 'APROBADA'">
                <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1" type="button"
                  matTooltip="La Proforma es: APROBADA por tanto NO SE PUEDE VALIDAR" matTooltipClass="custom-tooltip"
                  matTooltipPosition="above" disabled="true">
                  <span> <i class="fa fa-check" aria-hidden="true" style="color: #05970c;"></i>
                    Validar</span>
                </button>
              </ng-container>

              <ng-container *ngIf="estado_proforma === 'TRANSFERIDA'">
                <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1" type="button"
                  matTooltip="La Proforma es: TRANSFERIDA por tanto NO SE PUEDE VALIDAR"
                  matTooltipClass="custom-tooltip" matTooltipPosition="above" disabled="true">
                  <span> <i class="fa fa-check" aria-hidden="true" style="color: #05970c;"></i>
                    Validar</span>
                </button>
              </ng-container>

              <ng-container *ngIf="estado_proforma === 'NO APROBADA'">
                <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1" type="button"
                  matTooltip="Validar" matTooltipClass="custom-tooltip" matTooltipPosition="above"
                  (click)="validarProformaAll();">
                  <span> <i class="fa fa-check" aria-hidden="true" style="color: #05970c;"></i>
                    Validar</span>
                </button>
              </ng-container>
            </div>

            <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1" type="button"
              (click)="modalVerificarCreditoDisponible();">
              <span>
                <mat-icon
                  style="color: #664f09d7;font-size: 0.9rem !important;height: 13px !important;width: 16px !important;">
                  account_balance_wallet</mat-icon> Verificar CrÃ©dito Disponible
              </span>
            </button>
          </div>
          &nbsp;&nbsp;
          <div class="pt-1" style="padding-left: 80px !important;">
            <h3><strong><u>MODIFICAR PROFORMA</u></strong></h3>
          </div>
          <!-- BOTONES FIN -->
        </div>

        <div class="input-group-append text-center" style="float: right;">
          <!-- <button class="btn btn-outline-secondary form-control-sm" type="button" (click)="modalMatrizClasica()"
            matTooltip="Matriz Item Clasica" matTooltipClass="custom-tooltip" matTooltipPosition="above">
            <i class="fa fa-th gray" aria-hidden="true"></i>
          </button> -->

          <button class="btn btn-outline-secondary form-control-sm" type="button" (click)="modalMatrizProductos()"
            matTooltip="Matriz Item Vendedores" matTooltipClass="custom-tooltip" matTooltipPosition="above">
            <i class="fa fa-th blue" aria-hidden="true"></i>
          </button>

          <!-- <button class="btn btn-outline-secondary form-control-sm" type="button" (click)="modalMatrizLista()"
            matTooltip="Matriz Item Lista" matTooltipClass="custom-tooltip" matTooltipPosition="above">
            <i class="fa fa-th black" aria-hidden="true"></i>
          </button> -->

          <button class="btn btn-outline-secondary form-control-sm" type="button" (click)="empaquesCerradosValidacion()"
            matTooltip="Empaques Multiplos Cerrados" matTooltipClass="custom-tooltip">
            <i class="fa fa-inbox gray" aria-hidden="true"></i>
          </button>
          <button class="btn btn-outline-secondary form-control-sm" type="button" matTooltip="Estado Mora"
            matTooltipClass="custom-tooltip" (click)="estadoMoraValidacion()">
            <mat-icon class="red">photo_size_select_small</mat-icon>
          </button>
          <button class="btn btn-outline-secondary form-control-sm" type="button" matTooltip="Pagos Cliente"
            matTooltipClass="custom-tooltip" [disabled]="!codigo_cliente" (click)="estadoPagoClientes();">
            <mat-icon class="blue">photo_size_select_small</mat-icon>
          </button>
          <button class="btn btn-outline-secondary form-control-sm" type="button" matTooltip="Validar Negativos"
            matTooltipClass="custom-tooltip" (click)="validarProformaSoloNegativos();">
            <i class="fa fa-inbox blue" aria-hidden="true"></i>
          </button>
          <button class="btn btn-outline-secondary form-control-sm" type="button">
            <i class="fa fa-question-circle black" aria-hidden="true"></i>
          </button>
          <button class="btn btn-outline-secondary form-control-sm" type="button" matTooltipClass="custom-tooltip"
            matTooltip="Validar Empaques Minimo de Precio" (click)="empaquesMinimosPrecioValidacion()">
            <i class="fa fa-inbox red" aria-hidden="true"></i>
          </button>
          <button class="btn btn-outline-secondary form-control-sm" type="button">
            <i class="fa fa-window-restore blue" aria-hidden="true"></i>
          </button>
          <button class="btn btn-outline-secondary form-control-sm" type="button" matTooltipClass="custom-tooltip"
            matTooltip="Verificar Depositos Pendientes de Descuentos del Cliente"
            [disabled]="!codigo_cliente && id_proforma_numero_id !== 0 || id_tipo_view_get_codigo === ''"
            (click)="verificarDepositoPendientesDescuentoCliente()">
            <i class="fa fa-calculator blue" aria-hidden="true"></i>
          </button>

          <!-- <button class="btn btn-outline-secondary form-control-sm" type="button">
            <mat-icon class="yellow"> monetization_on</mat-icon>
          </button> -->

          <!-- <button class="btn btn-outline-secondary form-control-sm" type="button">
            <i class="fa fa-user black" aria-hidden="true"></i>
          </button> -->

          <!-- [disabled]="[array_items_carrito_y_f4_catalogo].length !== 1" {{ [array_items_carrito_y_f4_catalogo].length  }} -->
          <button mat-button [matMenuTriggerFor]="beforeMenu">
            <mat-icon>expand_more</mat-icon>
          </button>

          <mat-menu #beforeMenu="matMenu" xPosition="before">
            <mat-list role="list">
              <mat-list-item role="listitem" class="list-button">
                <button class="btn btn-outline-secondary form-control-sm" type="button"
                  [disabled]="!codigo_cliente && id_proforma_numero_id !== 0 || id_tipo_view_get_codigo === ''"
                  (click)="ultimasProformas()">
                  <i class="fa fa-clone green" aria-hidden="true"></i> Ultimas Proformas
                </button>
              </mat-list-item>
              <mat-list-item role="listitem" class="list-button">
                <button class="btn btn-outline-secondary form-control-sm" type="button"
                  (click)="modalBtnImpresionesAgarrandoValorAprobada();">
                  <i class="fa fa-print" aria-hidden="true"></i> Mandar Imprimir
                </button>
              </mat-list-item>

              <mat-list-item role="listitem" class="list-button">
                <button class="btn btn-outline-secondary form-control-sm" type="button"
                  (click)="detalleProformaCarritoTOExcel();">
                  <i class="fa fa-paper-plane" aria-hidden="true"></i> Detalle a Excel
                </button>
              </mat-list-item>

              <mat-list-item role="listitem" class="list-button">
                <button class="btn btn-outline-secondary form-control-sm" type="button" matTooltipClass="custom-tooltip"
                  matTooltip="Orden Pedido" (click)="ordenarDetalleSegunOrdenPedido();">
                  <i class="fa fa-bars" aria-hidden="true"></i> Orden Pedido
                </button>
              </mat-list-item>
            </mat-list>
          </mat-menu>
        </div>
      </div>
    </div>
  </div>

  <div class="content">
    <!-- cabecera -->
    <form class="example-form" [formGroup]="FormularioData">
      <div class="mat-elevation-z2 row">
        <!-- primeraColumna -->
        <div class="col-md-3 col-lg-3">
          <div class="row">
            <div class="col-md-7" style="padding-right: 0px;padding-left: 6.5px;">
              <div class="input-group">
                <div class="input-group-">
                  <span class="input-group-text form-control-sm"
                    style="padding: 10px 0px 0px 0px;border: 0 !important;"><u>ID Tipo </u></span>
                </div>

                <ng-container>
                  <!-- (blur)="onLeaveIDTipo($event)" -->
                  <input type="text" class="form-control form-control-sm" formControlName="id"
                  [(ngModel)]="id_tipo_view_get_codigo" id="inputCatalogoIdTipo" style="margin-left: 17px;" [readonly]="true"
                  [class.is-invalid]="f.id.invalid && (f.id.dirty || f.id.touched)">
                </ng-container>

                <div class="input-group-append">
                  <button class="btn btn-outline-primary form-control-sm" type="button" (click)="modalTipoID();"
                    [disabled]="true" style="border-color: #093070;" matTooltip="Buscar ID"><i class="fa fa-search"></i>
                  </button>
                </div>
              </div>
            </div>

            <div class="col-md-5" style="padding-right: 6.5px;padding-left: 0px;">
              <div class="input-group">
                <input type="text" class="form-control form-control-sm" formControlName="numeroid"
                  [(ngModel)]="id_proforma_numero_id" [readonly]="true">
              </div>
            </div>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm"
                style="padding: 10px 0px 0px 0px;border: 0 !important;"><u>Fecha</u></span>
            </div>
            <input type="text" class="form-control form-control-sm" style="margin-left: 21px;" formControlName="fecha"
              ngModel="{{ fecha_actual | date:'yyyy-MM-dd'}}" [readOnly]="true">
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm"
                style="padding: 10px 0px 0px 0px;border: 0 !important;"><u>Fecha Hr </u></span>
            </div>
            <input type="text" class="form-control form-control-sm" style="margin-left: 6px;"
              ngModel="{{fecha_actual | date:'yyyy-MM-dd'}}" [readOnly]="true" formControlName="fecha_inicial">
            <input type="text" class="form-control form-control-sm" style="margin-left: 5px;"
              formControlName="hora_inicial" ngModel="{{fecha_actual | date:'HH:mm'}}" [readOnly]="true">
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="input-group">
                <div class="input-group-">
                  <span class="input-group-text form-control-sm"
                    style="padding: 10px 0px 0px 0px;border: 0 !important;">
                    <u>
                      <div *ngIf="submitted && f.codalmacen.invalid" class="invalid-feedback">
                        <mat-icon matTooltipClass="custom-tooltip" matTooltip="Validar Almacen">info
                        </mat-icon>
                      </div> Almacen
                    </u>
                  </span>
                </div>
                <ng-container>
                  <input type="text" class="form-control form-control-sm" [(ngModel)]="almacn_parame_usuario_almacen"
                    formControlName="codalmacen" id="inputCatalogoAlmacen" (blur)="onLeaveAlmacen($event)"
                    [class.is-invalid]="f.codalmacen.invalid && (f.codalmacen.dirty || f.codalmacen.touched)"
                    style="margin-left: 7px;" readonly>
                </ng-container>

                <div class="input-group-append">
                  <button class="btn btn-outline-primary form-control-sm" type="button" (click)="modalAlmacen();"
                    style="border-color: #093070;" matTooltipClass="custom-tooltip" matTooltip="Buscar Almacen"
                    [disabled]="true"><i class="fa fa-search"></i>
                  </button>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="input-group">
                <div class="input-group-">
                  <span class="input-group-text form-control-sm"
                    style="padding: 10px 0px 0px 0px;border: 0 !important;">
                    <div *ngIf="submitted && f.codvendedor.invalid" class="invalid-feedback">
                      <mat-icon style="height: 22px !important;" matTooltipClass="custom-tooltip"
                        matTooltip="Validar Vendedor">info</mat-icon>
                    </div>
                    <u>Vendedor</u>
                  </span>
                </div>
                <ng-container>
                  <input type="text" class="form-control form-control-sm" id="inputCatalogoVendedor"
                    formControlName="codvendedor" [(ngModel)]="cod_vendedor_cliente"
                    [class.is-invalid]="f.codvendedor.invalid && (f.codvendedor.dirty || f.codvendedor.touched)"
                    (blur)="onLeaveVendedor($event)">
                </ng-container>

                <div class="input-group-append">
                  <button class="btn btn-outline-primary form-control-sm" type="button" (click)="modalVendedor();"
                    style="border-color: #093070;" matTooltipClass="custom-tooltip" matTooltip="Buscar Vendedor"><i
                      class="fa fa-search"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm" style="padding: 10px 0px 0px 0px;border: 0 !important;">
                <div *ngIf="submitted && f.preparacion.invalid" class="invalid-feedback">
                  <mat-icon style="height: 21px !important;" matTooltipClass="custom-tooltip"
                    matTooltip="Validar PreparaciÃ³n">info</mat-icon>
                </div>
                <u>PreparaciÃ³n</u>
              </span>
            </div>
            <mat-select class="custom-select1 form-control-sm" style="margin-left: 5px;" [(ngModel)]="preparacion"
              formControlName="preparacion"
              [ngClass]="{'is-invalid': f.preparacion.invalid && (f.preparacion.dirty || f.preparacion.touched)}">
              <mat-option value="NORMAL">NORMAL</mat-option>
              <mat-option value="URGENTE">URGENTE</mat-option>
              <mat-option value="FINAL">FINAL</mat-option>
              <mat-option value="URGENTE PROVINCIAS">URGENTE PROVINCIAS</mat-option>
              <mat-option value="POR COMISIONISTA">POR COMISIONISTA</mat-option>
              <mat-option value="CAJA CERRADA RECOGE CLIENTE">CAJA CERRADA RECOGE CLIENTE</mat-option>
            </mat-select>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm"
                style="padding: 10px 0px 0px 0px;border: 0 !important;"><u>Tipo Cliente </u></span>
            </div>
            <!-- <span>{{tipo_cliente}}</span> -->
            <input type="text" class="form-control form-control-sm" style="margin-left: 6px;"
              formControlName="tipo_cliente" [(ngModel)]="tipo_cliente" [readOnly]="true">
          </div>
        </div>

        <!-- segundaColumna -->
        <div class="col-md-3 col-lg-3 ">
          <div class="row">
            <span style="color: #ef4d4d !important;"><strong>{{ descrip_confirmada }}</strong></span>
          </div>
          <div class="row">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm" style="border: 0 !important;">
                <u>Venta Cliente en Oficina</u>
              </span>
            </div>
            <div class="input-group-prepend">
              <div class="input-group-text" style="border: 0;">
                <input type="checkbox" [(value)]="venta_cliente_oficina" formControlName="venta_cliente_oficina"
                  style="padding: 0px !important;">
              </div>
            </div> |
            <span class="input-group-text form-control-sm"
              style="border: 0 !important;padding: 0px !important;padding: 0px !important;"><u>Cliente:</u></span>
            <ng-container *ngIf="cliente_habilitado_get === true; else no_habilitado">
              <span class="input-group-text form-control-sm"
                style="border: 2px solid #149b31 !important;color: #149b31;padding: 0px !important;">
                <strong>HABILITADO</strong>
              </span>
            </ng-container>
            <ng-template #no_habilitado>
              <span class="input-group-text form-control-sm"
                style="border: 2px solid #ef4d4d !important;color: #ef4d4d;padding: 0px !important;">
                <strong>DES-HABILITADO</strong>
              </span>
            </ng-template>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm"
                style="padding: 10px 6px 0px 27px;border: 0 !important;"><u>Precio de Ventas</u> </span>
            </div>

            <ng-container>
              <input type="number" class="form-control form-control-sm" [(ngModel)]="cod_precio_venta_modal_codigo"
                (blur)="onLeavePrecioVenta($event)" id="inputCatalogoPrecioVenta" formControlName="preciovta">
            </ng-container>

            <div class="input-group-append">
              <a class="btn btn-outline-primary form-control-sm" style="border-color: #093070;"
                (click)="modalPrecioVenta();"> <i class="fa fa-search"></i>
              </a>
              <a class="btn btn-outline-primary form-control-sm" style="border-color: #093070;"
                (click)="aplicarPrecioVenta(cod_precio_venta_modal_codigo)"><i class="fa fa-cog"></i> Aplicar
              </a>
            </div>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm"
                style="padding: 10px 3px 0px 25px;border: 0 !important;"><u>Desct. Especiales</u> </span>
            </div>

            <ng-container>
              <input type="number" class="form-control form-control-sm" [(ngModel)]="cod_descuento_modal_codigo"
                id="inputCatalogoDesctEspecial" (blur)="onLeaveDescuentoEspecial($event)" formControlName="descuentos">
            </ng-container>

            <div class="input-group-append">
              <a class="btn btn-outline-primary form-control-sm" type="button" style="border-color: #093070;"
                (click)="modalDescuentoEspecial();">
                <i class="fa fa-search"></i>
              </a>
              <a class="btn btn-outline-primary form-control-sm" type="button" style="border-color: #093070;"
                (click)="aplicarDesctEspc(cod_descuento_modal_codigo);"><i class="fa fa-cog"></i> Aplicar
              </a>
            </div>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm"
                style="padding: 8px 4px 0px 48px !important;border: 0 !important;">
                <div *ngIf="submitted && f.tipopago.invalid" class="invalid-feedback">
                  <mat-icon matTooltipClass="custom-tooltip" matTooltip="Validar Tipo de Pago">info</mat-icon>
                </div>
                <u> Tipo de Pago </u>
              </span>
            </div>
            <mat-select class="custom-select1 form-control-sm" [(ngModel)]="tipopago" placeholder="SELECCIONAR..."
              formControlName="tipopago" (selectionChange)="onInputChangeTIPOPAGO($event)"
              [class.is-invalid]="f.tipopago.invalid && (f.tipopago.dirty || f.tipopago.touched)">
              <mat-option [value]=0>CONTADO</mat-option>
              <mat-option [value]=1>CREDITO</mat-option>
            </mat-select>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm"
                style="padding: 10px 0px 0px 16px;border: 0 !important;"><u>Es Contra Entrega</u></span>
            </div>
            <div class="input-group-prepend">
              <div class="input-group-text" style="border: 0 !important;">
                <ng-container *ngIf="tipopago === 0">
                  <input type="checkbox" formControlName="contra_entrega" [(ngModel)]="contra_entrega"
                    (change)="onCheckboxChange($event)">
                </ng-container>
                <ng-container *ngIf="tipopago === 1">
                  <input type="checkbox" [value]=false disabled>
                </ng-container>
              </div>
            </div>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm"
                style="padding: 10px 3px 0px 0px;border: 0 !important;"><u>Estado Contra Entrega</u> </span>
            </div>
            <ng-container *ngIf="tipopago === 0">
              <select class="custom-select1 form-control-sm" formControlName="estado_contra_entrega"
                [(ngModel)]="estado_contra_entrega_input">
                <option value="YA CANCELO">YA CANCELO</option>
                <option value="POR CANCELAR">POR CANCELAR</option>
              </select>
            </ng-container>

            <ng-container *ngIf="tipopago === 1">
              <select class="custom-select1 form-control-sm">
                <option value=""></option>
              </select>
            </ng-container>
          </div>

          <!-- <ng-container *ngIf="tipopago === 1">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text form-control-sm"
                  style="padding: 10px 0px 0px 16px;border: 0 !important;"><u>Es Contra Entrega</u></span>
              </div>
              <div class="input-group-prepend">
                <div class="input-group-text" style="border: 0 !important;">
                  <input type="checkbox" formControlName="contra_entrega" value="NO" disabled>
                </div>
              </div>
            </div>

            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text form-control-sm"
                  style="padding: 10px 3px 0px 0px;border: 0 !important;"><u>Estado Contra Entrega</u>
                </span>
              </div>
              <select class="custom-select1 form-control-sm" formControlName="estado_contra_entrega"
                [(ngModel)]="estado_contra_entrega_input" value="">
                <option value=""> </option>
              </select>
            </div>
          </ng-container> -->
        </div>

        <!-- terceraColumna -->
        <div class="col-md-2 col-lg-2 col-sm-0">
          <div class="col">
            <div class="input-group">
              <div class="input-group-text" style="border: 0;padding: 0px !important;">
                <input type="checkbox" [(ngModel)]="calcularEmpaquePorPrecio" [checked]="precio"
                  (change)="togglePrecio()">
              </div>

              <span class="form-control-sm" style="border: 0 !important;">
                <u>Calcular Empa por Precio</u>
              </span>
            </div>
          </div>

          <div class="col">
            <div class="input-group">
              <div class="input-group-text" style="border: 0;padding: 0px !important;">
                <input type="checkbox" [(ngModel)]="calcularEmpaquePorDescuento" [checked]="desct"
                  (change)="toggleDescuento()">
              </div>

              <span class="form-control-sm" style="border: 0 !important;">
                <u>Calcular Empa por Descto</u>
              </span>
            </div>
          </div>
        </div>

        <!-- cuartaColumna -->
        <div class="col-md-4 col-lg-4 col-sm-4" style="float: right;">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm" style="padding: 9px 0px 0px 18px;border: 0 !important;">
                <div *ngIf="submitted && f.codcliente.invalid" class="invalid-feedback">
                  <mat-icon matTooltipClass="custom-tooltip" matTooltip="Validar Cliente">info</mat-icon>
                </div>
                <u> Cod. Cliente </u>
              </span>
            </div>

            <input type="text" class="form-control cliente form-control-sm" formControlName="codcliente"
              [(ngModel)]="codigo_cliente" style="margin-left: 6.5px;" id="inputCatalogoCliente"
              placeholder="COD. CLIENTE"
              [class.is-invalid]="f.codcliente.invalid && (f.codcliente.dirty || f.codcliente.touched)">
            <div *ngIf="submitted && f.nit.invalid" class="invalid-feedback"></div>
            <div class="input-group-append">
              <span class="input-group-text form-control-sm" (click)="modalClientes();"
                style="cursor: pointer; border: 1;">
                <i class="fa fa-search" aria-hidden="true" style="color: #093070;"></i>
              </span>
              <span class="input-group-text form-control-sm" (click)="getClientByID(codigo_cliente);"
                style="cursor: pointer; border: 1;">
                <i class="fa fa-eye" aria-hidden="true" style="color: #093070;"></i>
              </span>
            </div>
            <div class="input-group-append">
              <button class="input-group-text form-control-sm" type="button" [disabled]="!codigo_cliente"
                (click)="modalClientesInfo('900ms', '900ms');">
                <i class="fa fa-info-circle" aria-hidden="true" style="color: #093070;"></i>
              </button>
            </div>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm"
                style="padding: 9px 8px 0px 0px;border: 0 !important;"><u>Nombre Cliente </u></span>
            </div>
            <ng-container *ngIf="razon_social === 'SIN NOMBRE'">
              <input type="text" class="form-control form-control-sm" placeholder="Nombre Cliente"
                formControlName="razon_social" [(ngModel)]="razon_social" readonly>
            </ng-container>

            <ng-container *ngIf="razon_social !== 'SIN NOMBRE'">
              <input type="text" class="form-control form-control-sm" placeholder="Nombre Cliente"
                value="{{ razon_social }}" [(ngModel)]="razon_social" formControlName="razon_social" readonly>
            </ng-container>

            <!-- en modificar proforma no se puede crear cliente 19-12-2024 -->
            <!-- <div class="input-group-append">
              <button class="btn btn-outline-primary form-control-sm" type="button" style="border-color: #093070;"
                [disabled]="razon_social !== 'SIN NOMBRE'" (click)="guardarNombreCliente();"><i class="fa fa-save"></i>
              </button>
            </div> -->
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm"
                style="padding: 7px 5px 0px 0px;border: 0 !important;"><u>Nombre Factura </u> </span>
            </div>

            <ng-container *ngIf="razon_social === 'SIN NOMBRE'">
              <input type="text" class="form-control form-control-sm" [(ngModel)]="razon_social"
                formControlName="nomcliente">
            </ng-container>

            <ng-container *ngIf="razon_social !== 'SIN NOMBRE'">
              <input type="text" class="form-control form-control-sm" [(ngModel)]="razon_social"
                formControlName="nomcliente" readonly>
            </ng-container>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm" style="padding: 9px 3px 2px 42px;border: 0 !important;">
                <div *ngIf="submitted && f.tipo_docid.invalid" class="invalid-feedback">
                  <mat-icon matTooltipClass="custom-tooltip" matTooltip="Validar Doc Id">info</mat-icon>
                </div>
                <u> Doc. Id.</u>
              </span>
            </div>

            <mat-select class="custom-select1 form-control-sm" formControlName="tipo_docid" style="margin-left: 3px;"
              [disabled]="!codigo_cliente?.startsWith('SN')" [(ngModel)]="tipo_doc_cliente"
              [class.is-invalid]="f.tipo_docid.invalid && (f.tipo_docid.dirty || f.tipo_docid.touched)">
              <mat-option *ngFor="let documento_identidads of documento_identidad"
                [value]="documento_identidads.codigoclasificador" [disabled]="!codigo_cliente?.startsWith('SN')">
                {{ documento_identidads.codigoclasificador }} - {{ documento_identidads.descripcion }}</mat-option>
            </mat-select>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm" style="padding: 8px 6px 0px 41px;border: 0 !important;">
                <div *ngIf="submitted && f.nit.invalid" class="invalid-feedback">
                  <mat-icon matTooltipClass="custom-tooltip" matTooltip="Validar NIT">info</mat-icon>
                </div>
                <u><i class="fa fa-eye" (click)="verificarNit()" style="cursor:pointer"></i> N.I.T</u>
              </span>
              <div *ngIf="submitted && f.nit.invalid" class="invalid-feedback"></div>
            </div>

            <container-element [ngSwitch]="tipo_doc_cliente" style="width: 80%;">
              <!-- CI/NIT  VALIDAR QUE SOLO SEAN NUMEROS -->
              <!-- CEX - CEDULA DE IDENTIDAD EXTRANJERO PAS - PASOPORTE OTRO-DOCUMENTO -->
              <ng-container *ngSwitchCase="1">
                <div class="input-group-prepend">
                  <input type="number" class="form-control form-control-sm" formControlName="nit"
                    placeholder="CARNET IDENTIDAD" [readonly]="!codigo_cliente?.startsWith('SN')"
                    (paste)="onPaste($event)" [(ngModel)]="nit_cliente" style="width: 66%;"
                    [class.is-invalid]="f.nit.invalid && (f.nit.dirty || f.nit.touched)">
                  <div *ngIf="submitted && f.nit.invalid" class="invalid-feedback"></div>
                  <input type="text" class="form-control form-control-sm" formControlName="complemento_ci"
                    placeholder="COMPLEMENTO" [(ngModel)]="complemento_ci"
                    [readonly]="!codigo_cliente?.startsWith('SN')" style="width: 34%;">
                </div>
              </ng-container>
              <ng-container *ngSwitchCase="2">
                <input type="text" class="form-control form-control-sm" (paste)="onPaste($event)" formControlName="nit"
                  placeholder="CEX - CÃ‰DULA DE IDENTIDAD DE EXTRANJERO" [readonly]="!codigo_cliente?.startsWith('SN')"
                  style="width: 100%;font-size: 0.55rem !important;" [(ngModel)]="nit_cliente"
                  [class.is-invalid]="f.nit.invalid && (f.nit.dirty || f.nit.touched)">
                <div *ngIf="submitted && f.nit.invalid" class="invalid-feedback"></div>
              </ng-container>
              <ng-container *ngSwitchCase="3">
                <input type="text" class="form-control form-control-sm" placeholder="PAS - PASAPORTE"
                  (paste)="onPaste($event)" formControlName="nit" style="font-size: 0.55rem !important;width: 100%;"
                  [(ngModel)]="nit_cliente" [readonly]="!codigo_cliente?.startsWith('SN')"
                  [class.is-invalid]="f.nit.invalid && (f.nit.dirty || f.nit.touched)">
                <div *ngIf="submitted && f.nit.invalid" class="invalid-feedback"></div>
              </ng-container>
              <ng-container *ngSwitchCase="4">
                <input type="text" class="form-control form-control-sm" (paste)="onPaste($event)" formControlName="nit"
                  placeholder="OD - OTRO DOCUMENTO DE IDENTIDAD" style="font-size: 0.55rem !important;width: 100%;"
                  [(ngModel)]="nit_cliente" [readonly]="!codigo_cliente?.startsWith('SN')"
                  [class.is-invalid]="f.nit.invalid && (f.nit.dirty || f.nit.touched)">
                <div *ngIf="submitted && f.nit.invalid" class="invalid-feedback"></div>
              </ng-container>
              <ng-container *ngSwitchCase="5">
                <input type="number" class="form-control form-control-sm" (paste)="onPaste($event)"
                  formControlName="nit" placeholder="NIT - NÃšMERO DE IDENTIFICACIÃ“N TRIBUTARIA" min="0"
                  [readonly]="!codigo_cliente?.startsWith('SN')" style="width: 100%;font-size: 0.55 rem !important;"
                  [(ngModel)]="nit_cliente" [class.is-invalid]="f.nit.invalid && (f.nit.dirty || f.nit.touched)">
                <div *ngIf="submitted && f.nit.invalid" class="invalid-feedback"></div>
              </ng-container>
            </container-element>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm" style="padding: 10px 3px 0px 40px;border: 0 !important;">
                <u (click)="setEmailDefault();" style="cursor: pointer;">
                  <i class="fa fa-magic" (click)="setEmailDefault();" style="cursor: pointer;" aria-hidden="true"></i>
                  Email
                </u>
              </span>
            </div>
            <ng-container *ngIf="!email_cliente ">
              <input type="email" class="form-control form-control-sm" formControlName="email" style="margin-left: 4px;"
                style="margin-left: 2px;" [value]="" [(ngModel)]="email">
            </ng-container>

            <ng-container *ngIf="email_cliente">
              <input type="email" class="form-control form-control-sm" formControlName="email"
                [(ngModel)]="email_cliente" style="margin-left: 2px;">
            </ng-container>

            <div class="input-group-append">
              <button class="btn btn-outline-primary form-control-sm" type="button" style="border-color: #093070;"
                (click)="guardarCorreo();" [disabled]="!email_cliente"><i class="fa fa-save"></i>
              </button>
            </div>
          </div>

          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text form-control-sm"
                style="padding: 9px 3px 0px 32px;border: 0 !important;"><u>Whatsapp </u></span>
            </div>

            <input type="text" class="form-control form-control-sm" formControlName="celular" style="margin-left: 2px;"
              [(ngModel)]="whatsapp_cliente">

            <ng-container>
              <input type="text" class="form-control form-control-sm" id="inputMoneda" formControlName="codmoneda"
                [(ngModel)]="moneda_get_catalogo" placeholder="Moneda" readonly>
            </ng-container>
            <div class="input-group-append">
              <a class="btn btn-outline-primary form-control-sm" type="button" (click)="modalCatalogoMoneda();"
                style="border-color: #093070;"><i class="fa fa-search"></i>
              </a>
            </div>

            <input type="text" class="form-control form-control-sm" [(ngModel)]="tipo_cambio_moneda_catalogo"
              formControlName="tdc" readOnly="true" style="text-align: left !important;">
          </div>
        </div>
      </div>
    </form>
    <!-- finCabezera -->

    <!-- InicioTabla -->
    <div class="row">
      <div class="col">
        <mat-tab-group class="miTabGroupDetalle" #tabGroup>
          <mat-tab label="Detalle del Pedido">
            <p-table [value]="array_items_carrito_y_f4_catalogo" [tableStyle]="{'min-width': '60rem'}"
              styleClass="p-datatable-striped tablitaDetalle" [metaKeySelection]="true" selectionMode="multiple"
              [(selection)]="selectedProducts" dataKey="coditem" sortMode="multiple" (onRowSelect)="onRowSelect($event)"
              (onRowUnselect)="onRowUnselect($event)" (onEditComplete)="onEditComplete($event)">
              <ng-template pTemplate="header"
                class="mat-mdc-header-cell mdc-data-table__header-cell cdk-header-cell mat-column-max-ventas cdk-column-descripcion mat-column-descripcion ng-star-inserted">
                <tr
                  class="mat-mdc-header-cell mdc-data-table__header-cell cdk-header-cell mat-column-max-ventas cdk-column-descripcion mat-column-descripcion ng-star-inserted">
                  <th pSortableColumn="nroitem" class="center1" style="width:2%;">
                    OrPed
                  </th>
                  <th pSortableColumn="orden" class="center1" style="width:4%">
                    Orden
                    <!-- <p-sortIcon class="iconGrid" field="orden" /> -->
                  </th>
                  <th pSortableColumn="item" style="width:8%" class="center1"
                    style="text-align: center !important; cursor: pointer;">
                    <i (click)="modalCatalogoProductos()" class="fa fa-plus"
                      style="text-align: center !important; cursor: pointer;"></i>&nbsp;<u>Item</u>
                    <p-sortIcon field="item" />
                  </th>
                  <th pSortableColumn="descripcion" style="width:21%;" class="center">
                    DescripciÃ³n
                  </th>
                  <th pSortableColumn="medida" class="left" style="width:7%">
                    Medida
                    <!-- <p-sortIcon field="medida"/> -->
                  </th>
                  <th pSortableColumn="ud" class="center1" style="width:3%">
                    Ud
                  </th>
                  <th pSortableColumn="iva" class="center1" style="width:2%">
                    %IVA
                  </th>
                  <th pSortableColumn="empaque" class="right1">
                    Empaque
                    <!-- <p-sortIcon field="empaque" /> -->
                  </th>
                  <th pSortableColumn="pedido" class="right1">
                    Pedido
                    <p-sortIcon field="pedido" />
                  </th>
                  <th pSortableColumn="cantidad" class="right1">
                    Cantidad
                    <p-sortIcon field="cantidad" />
                  </th>
                  <th pSortableColumn="sld" class="center1">
                    % SLD
                  </th>
                  <th pSortableColumn="TP" class="center1" style="width:2%">
                    TP
                    <!-- <p-sortIcon field="TP" /> -->
                  </th>
                  <th pSortableColumn="DE" class="center1">
                    DE
                    <!-- <p-sortIcon field="DE" /> -->
                  </th>
                  <th pSortableColumn="PUL" class="right1" style="width:4%">
                    PUL
                  </th>
                  <th pSortableColumn="NIV" class="right1" style="width:3%">
                    NIV
                  </th>
                  <th pSortableColumn="%" class="right1" style="width:3%">
                    %
                  </th>
                  <th pSortableColumn="PD" class="right1" style="width:6%">
                    PD
                  </th>
                  <th pSortableColumn="PU" class="right1" style="width:6%">
                    PU
                  </th>
                  <th pSortableColumn="%" class="right1" style="width:6%">
                    Total
                    <p-sortIcon field="Total" />
                  </th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-products let-rowIndex="rowIndex">
                <tr [pSelectableRow]="products" [pSelectableRowIndex]="rowIndex" [ngStyle]="{height: '10px'}"
                  (click)="itemDataAll(products?.coditem)">
                  <td class="center1"> {{ products.nroitem }} </td>
                  <td class="center1">
                    <i class="fa fa-trash" style="font-size: 0.6rem !important;color:rgb(222, 12, 12) !important;cursor:pointer;
                      padding-block-start: 3px;" (click)="eliminarItemTabla(products?.orden, products?.coditem);">
                    </i> {{ products.orden }}
                  </td>
                  <td class="center1">{{ products.coditem }}</td>
                  <td class="left">{{ products.descripcion }}</td>
                  <td class="left">{{ products.medida }}</td>
                  <td class="center1">{{ products.udm }}</td>
                  <td class="center1">{{ products.porceniva }}</td>

                  <td class="right1" [pEditableColumn]="products.empaque" pEditableColumnField="empaque">
                    <p-cellEditor>
                      <ng-template pTemplate="input">
                        <input pInputText type="number" min="0" [(ngModel)]="products.empaque" />
                      </ng-template>

                      <ng-template pTemplate="output">
                        {{ products.empaque === null ? 0 : products.empaque }}
                      </ng-template>
                    </p-cellEditor>
                  </td>

                  <td class="right1" [pEditableColumn]="products.cantidad_pedida" pEditableColumnField="cantidad_pedida">
                    <p-cellEditor>
                      <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="products.cantidad_pedida" min="0">
                      </ng-template>

                      <ng-template pTemplate="output">
                        <ng-container
                          *ngIf="products?.cumpleEmp === true && products?.cumpleMin === true && products?.cumple === true">
                          <span>{{ formatNumberTotalSubTOTALES(products.cantidad_pedida) }}</span>
                        </ng-container>

                        <ng-container *ngIf="products?.cumpleEmp === false && products?.cumple === true">
                          <span
                            style="color: #0000ffaf !important;background-color: #a6a5bb6b;font-weight: 900;">
                            {{ formatNumberTotalSubTOTALES(products.cantidad_pedida) }}</span>
                        </ng-container>

                        <ng-container *ngIf="products?.cumpleMin === false">
                          <span style="color: #ff0000dc !important;background-color: #a6a5bb6b;font-weight: 900;">
                            {{ formatNumberTotalSubTOTALES(products.cantidad_pedida) }}</span>
                        </ng-container>

                        <ng-container *ngIf="products?.cumple === false">
                          <!-- NEGATIVOS -->
                          <span
                            style="color: #5050e2 !important;font-weight: 900;">{{ formatNumberTotalSubTOTALES(products.cantidad_pedida) }}</span>
                        </ng-container>
                      </ng-template>
                    </p-cellEditor>
                  </td>

                  <td class="right1" [pEditableColumn]="products.cantidad" pEditableColumnField="cantidad">
                    <p-cellEditor>
                      <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="products.cantidad" min="0" id="input_cantidad">
                      </ng-template>

                      <ng-template pTemplate="output">
                        <ng-container
                          *ngIf="products?.cumpleEmp === true && products?.cumpleMin === true && products?.cumple === true">
                          <span>{{ formatNumberTotalSubTOTALES(products.cantidad) }}</span>
                        </ng-container>

                        <ng-container *ngIf="products?.cumpleEmp === false && products?.cumple === true">
                          <span
                            style="color: #0000ffaf !important;background-color: #a6a5bb6b;font-weight: 900;">
                            {{ formatNumberTotalSubTOTALES(products.cantidad) }}</span>
                        </ng-container>

                        <ng-container *ngIf="products?.cumpleMin === false">
                          <span style="color: #ff0000dc !important;background-color: #a6a5bb6b;font-weight: 900;">
                            {{ formatNumberTotalSubTOTALES(products.cantidad) }}</span>
                        </ng-container>
                        <ng-container *ngIf="products?.cumple === false">
                          <!-- NEGATIVOS -->
                          <span style="color: #5050e2 !important;font-weight: 900;">
                            {{ formatNumberTotalSubTOTALES(products.cantidad) }}</span>
                        </ng-container>
                      </ng-template>
                    </p-cellEditor>
                  </td>

                  <td class="center1">{{ formatNumberTotalSubTOTALES(products.porcen_mercaderia) }}</td>

                  <td class="center1" [pEditableColumn]="products.codtarifa" pEditableColumnField="codtarifa">
                    <p-cellEditor>
                      <ng-template pTemplate="input">
                        <input pInputText type="number" class="pedido" min="0" [(ngModel)]="products.codtarifa"
                          id="inputCatalogoPrecioVentaDetalle" (blur)="onLeavePrecioVentaDetalle($event, products)"
                          (change)="TPChangeMatrix(products, $event.target.value)"
                          (click)="inputClickedPrecioVenta(products)">
                      </ng-template>

                      <ng-template pTemplate="output">
                        {{ products.codtarifa }}
                      </ng-template>
                    </p-cellEditor>
                  </td>

                  <td class="center1" [pEditableColumn]="products.coddescuento" pEditableColumnField="coddescuento">
                    <p-cellEditor>
                      <ng-template pTemplate="input">
                        <input pInputText type="number" class="pedido" min="0"
                          id="inputCatalogoDescuentoEspecialDetalle" [(ngModel)]="products.coddescuento"
                          (blur)="onLeaveDescuentoEspecialDetalle($event, products)" [value]="products?.coddescuento"
                          (change)="DEChangeMatrix(products, $event.target.value)"
                          (click)="inputClickedDescuento(products)">
                      </ng-template>

                      <ng-template pTemplate="output">
                        {{ products?.coddescuento }}
                      </ng-template>
                    </p-cellEditor>
                  </td>
                  <td class="right1">{{ products.preciolista }}</td>
                  <td class="right1">{{ products.niveldesc }}</td>
                  <td class="right1">{{ products.porcendesc  | json}}</td>
                  <td class="right1">
                    {{ products.preciodesc?.toString()?.replace(',', '.') }}</td>
                  <td class="right1">
                    {{ products.precioneto?.toString().replace(',', '.') }}</td>
                  <td class="right1">
                    {{  calcularTotalCantidadXPU(products?.cantidad_pedida, products?.cantidad, products?.precioneto) }}
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </mat-tab>

          <mat-tab label="Negativos">
            <table mat-table [dataSource]="dataSource_negativos" class="mat-elevation-z8" matSort>
              <!-- kit Column -->
              <ng-container matColumnDef="kit">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Kit </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.kit }}</td>
              </ng-container>

              <!-- NÂ° Parte Column -->
              <ng-container matColumnDef="nro_partes">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"> NÂ° Parte</th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.nro_partes }}</td>
              </ng-container>

              <!-- Cod. Item Conjunto Column -->
              <ng-container matColumnDef="coditem_cjto">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Cod. Item Conjunto</th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.coditem_cjto }}</td>
              </ng-container>

              <!-- Cod. Item Conjunto Column -->
              <ng-container matColumnDef="coditem_suelto">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Cod. Item Suelto</th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.coditem_suelto }}
                </td>
              </ng-container>

              <!-- Cod. Item Conjunto Column -->
              <ng-container matColumnDef="codigo">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Cod. Item</th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.codigo }}</td>
              </ng-container>

              <!-- Cod. Item Conjunto Column -->
              <ng-container matColumnDef="descitem">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> DescripciÃ³n - Medida
                </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: left !important; padding: 0 0px 0 0px !important">{{ element.descitem }}</td>
              </ng-container>

              <!-- Cantidad Column -->
              <ng-container matColumnDef="cantidad">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Cant. </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos" style="text-align: center !important; padding: 0 0px 0 0px
                  !important">{{ formatNumberTotalSubTOTALES(element.cantidad)  }}</td>
              </ng-container>

              <!-- Cantidad Pedida en Conjunto Column -->
              <ng-container matColumnDef="cantidad_conjunto">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Cant. Pedida en
                  Conjunto </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos" style="text-align: right !important; padding: 0 0px 0 0px
                  !important">{{ formatNumberTotalSubTOTALES(element.cantidad_conjunto) }}
                </td>
              </ng-container>

              <!-- CSaldo Real Column -->
              <ng-container matColumnDef="saldo_sin_descontar_reservas">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Saldo Real </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: right !important;">
                  {{ formatNumberTotalSubTOTALES(element.saldo_sin_descontar_reservas) }}</td>
              </ng-container>

              <!-- Cantidad Pedida en Suelto Column -->
              <ng-container matColumnDef="cantidad_suelta">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important"> Cant. Pedida en Suelto
                </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: right !important; padding: 0px 2px 0px 9px !important;">
                  {{ formatNumberTotalSubTOTALES(element.cantidad_suelta) }}
                </td>
              </ng-container>

              <!-- Cantidad Reserva Conjunto Column -->
              <ng-container matColumnDef="cantidad_reservada_para_cjtos">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important">Cant. Reserva Conjunto
                </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: right !important;">
                  {{ formatNumberTotalSubTOTALES(element.cantidad_reservada_para_cjtos) }}</td>
              </ng-container>

              <!-- Cantidad Reserva Conjunto Column -->
              <ng-container matColumnDef="saldo_descontando_reservas">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important">Saldo Para Venta Suelta
                </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: right !important;">
                  {{ formatNumberTotalSubTOTALES(element.saldo_descontando_reservas) }}</td>
              </ng-container>

              <!-- Observacion Column -->
              <ng-container matColumnDef="obs">
                <th mat-header-cell *matHeaderCellDef class="mat-column-negativos"
                  style="padding: 0 0px 0 0px !important">Obs. </th>
                <td mat-cell *matCellDef="let element" class="mat-column-negativos"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">
                  <ng-container *ngIf="element.obs === 'Genera Negativo'; else obs1 ">
                    <strong style="color: red;">{{ element.obs }}</strong>
                  </ng-container>
                  <ng-template #obs1>
                    <strong style="color: green;">{{ element.obs }}</strong>
                  </ng-template>

                </td>
              </ng-container>

              <mat-header-row *matHeaderRowDef="displayedColumnsNegativos"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumnsNegativos;"></mat-row>
            </table>

            <div class="row fixed-bottom-bar" style="background-color: #000000 !important;">
              <div class="col-md" style="float: left;">
                <mat-slide-toggle (click)="negativosTodosFilterToggle()" [checked]="toggleTodosNegativos">
                  <span style="color:#ff8000 !important">Todos los Items</span>
                </mat-slide-toggle>
              </div>
              <div class="col-md" style="float: left;">
                <mat-slide-toggle (click)="negativosPositivosFilterToggle()" [checked]="togglePositivos">
                  <span style="color:#ff8000 !important">Solo Items NO Generan Saldos Negativos</span>
                </mat-slide-toggle>
              </div>
              <div class="col-md" style="float: left;">
                <mat-slide-toggle (click)="negativosNegativosFilterToggle()" [checked]="toggleNegativos"><span
                    style="color:#ff8000 !important">Saldo
                    Items Que SI Generan Saldos Negativos</span>
                </mat-slide-toggle>
              </div>
            </div>
          </mat-tab>

          <mat-tab label="Limites Maximo de Ventas">
            <table mat-table [dataSource]="dataSourceLimiteMaximoVentas" class="mat-elevation-z8" matSort>
              <!-- CÃ³digo Item  Column -->
              <ng-container matColumnDef="codigo">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas "> Item </th>
                <td mat-cell *matCellDef="let element; let i = index" class="mat-column-max-ventas"
                  [ngClass]="{'selected-row': selectedRowIndex === i}"
                  style="text-align: center !important; padding: 0 0px 0 0px !important;cursor:pointer"
                  (click)="getDiasControl(element.codigo)">{{ element.codigo }}</td>
              </ng-container>

              <!-- Descripcion Medida Column -->
              <ng-container matColumnDef="descripcion">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas"> DescripciÃ³n Medida </th>
                <td mat-cell *matCellDef="let element" class="mat-column-max-ventas"
                  style="text-align: left !important; padding: 0 0px 0 0px !important">{{ element.descripcion }}</td>
              </ng-container>

              <!-- Cantidad Aprobada Anterior Column -->
              <ng-container matColumnDef="cantidad_pf_anterior">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas">Cant. Aprobada Anterior
                </th>
                <td mat-cell *matCellDef="let element" class="mat-column-max-ventas" style="text-align: center !important; padding: 0 0px 0 0px
                  !important">{{ element.cantidad_pf_anterior }}</td>
              </ng-container>

              <!-- Cantidad Actual Column -->
              <ng-container matColumnDef="cantidad">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas">Cant. Actual
                </th>
                <td mat-cell *matCellDef="let element" class="mat-column-max-ventas" style="text-align: right !important; padding: 0 0px 0 0px
                  !important">{{ formatNumberTotalSubTOTALES(element.cantidad) }}</td>
              </ng-container>

              <!-- Cantidad Total Column -->
              <ng-container matColumnDef="cantidad_pf_total">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas">Cant. Total</th>
                <td mat-cell *matCellDef="let element" class="mat-column-max-ventas"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">
                  {{ element.cantidad_pf_total  }}
                </td>
              </ng-container>

              <!-- % de Venta Column -->
              <ng-container matColumnDef="porcen_venta">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas">% de Venta</th>
                <td mat-cell *matCellDef="let element" class="mat-column-max-ventas" style="text-align: center !important; padding: 0 0px 0 0px
                  !important">{{ element.porcen_venta }}</td>
              </ng-container>

              <!-- Codigo Descuento Especial Column -->
              <ng-container matColumnDef="cod_desct_esp">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas">Cod. Descuento Especial
                </th>
                <td mat-cell *matCellDef="let element" class="mat-column-max-ventas"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.coddescuento }}</td>
              </ng-container>

              <!-- Precio Column -->
              <ng-container matColumnDef="precio">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas">Precio</th>
                <td mat-cell *matCellDef="let element" class="mat-column-max-ventas"
                  style="text-align: center !important; padding: 0 0px 0 0px !important"> </td>
              </ng-container>

              <!-- Saldo Column -->
              <ng-container matColumnDef="saldo">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas">Saldo</th>
                <td mat-cell *matCellDef="let element" class="mat-column-max-ventas" style="text-align: right !important; padding: 0 0px 0 0px
                  !important">{{ formatNumberTotalSubTOTALES(element.saldo) }}</td>
              </ng-container>

              <!-- % Max. Ventas Column -->
              <ng-container matColumnDef="porcen_maximo">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas">% Max. Ventas</th>
                <td mat-cell *matCellDef="let element" class="mat-column-max-ventas"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">
                  {{ formatNumberTotalSubTOTALES(element.porcen_maximo) }}
                </td>
              </ng-container>

              <!-- Cantidad Max. Ventas Column -->
              <ng-container matColumnDef="cantidad_max_venta">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas">Cant. Max. Ventas</th>
                <td mat-cell *matCellDef="let element" class="mat-column-max-ventas" style="text-align: right !important; padding: 0 0px 0 0px
                  !important">{{ formatNumberTotalSubTOTALES(element.cantidad_permitida_seg_porcen) }}</td>
              </ng-container>

              <!-- Empaque Column -->
              <ng-container matColumnDef="empaque_precio">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas">Empaque Seg/Precio</th>
                <td mat-cell *matCellDef="let element" class="mat-column-max-ventas" style="text-align: center !important; padding: 0 0px 0 0px
                  !important">{{ element.empaque_precio }}
                </td>
              </ng-container>

              <ng-container matColumnDef="pasa_limite">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas">Â¿Pasa el % Venta?</th>
                <td mat-cell *matCellDef="let element" class="mat-column-max-ventas" style="text-align: center !important; padding: 0 0px 0 0px
                  !important">

                  <ng-container
                    *ngIf="formatNumberTotalSubTOTALES(element.cantidad) > formatNumberTotalSubTOTALES(element.cantidad_permitida_seg_porcen) ;else prctvt">
                    <strong style="color: red;">SI</strong>
                  </ng-container>
                  <ng-template #prctvt>
                    <strong style="color: green;">NO</strong>
                  </ng-template>
                </td>
              </ng-container>

              <!-- Observaciones Column -->
              <ng-container matColumnDef="obs">
                <th mat-header-cell *matHeaderCellDef class="mat-column-max-ventas">Obs.</th>
                <td mat-cell *matCellDef="let element" class="mat-column-max-ventas" [ngSwitch]="element.obs">
                  <ng-container *ngSwitchCase="'Cumple'">
                    <strong style="color: green;">{{ element.obs }}</strong>
                  </ng-container>
                  <ng-container *ngSwitchCase="'No hay Saldo!!!'">
                    <strong style="color: red;">{{ element.obs }}</strong>
                  </ng-container>
                  <ng-container *ngSwitchCase="'No cumple'">
                    <strong style="color: red;">{{ element.obs }}</strong>
                  </ng-container>
                  <ng-container *ngSwitchDefault>
                    <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1"
                      (click)="modalDetalleObservaciones(element.obs, element.ObsDetalle );">
                      <span><i class="fa fa-eye" aria-hidden="true" style="color: #ffc107;"></i> Ver Detalles
                        Obs.</span>
                    </button>
                    {{ element.obs }}
                  </ng-container>
                </td>
              </ng-container>

              <mat-header-row *matHeaderRowDef="displayedColumnsLimiteMaximoVentas"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumnsLimiteMaximoVentas;"></mat-row>
            </table>

            <div class="row fixed-bottom-bar" style="background-color: #000000 !important;">
              <div class="col-md" style="float: left;">
                <mat-slide-toggle (click)="maximoVentasAllFilterToggle()" [checked]="toggleTodosMaximoVentas">
                  <span style="color:#fbd800 !important">Todos los Items</span>
                </mat-slide-toggle>
              </div>
              <div class="col-md" style="float: left;">
                <mat-slide-toggle (click)="maxmoVentasNOSobrepasanFilterToggle()"
                  [checked]="toggleMaximoVentasNoSobrepasan">
                  <span style="color:#fbd800 !important">Solo Items No Sobre Pasan Limite
                    Max. de Ventas</span>
                </mat-slide-toggle>
              </div>
              <div class="col-md" style="float: left;">
                <mat-slide-toggle (click)="maxmoVentasSISobrepasanFilterToggle()"
                  [checked]="toggleMaximoVentaSobrepasan">
                  <span style="color:#fbd800 !important">Solo Items Si Sobren Pasan Limite Max. de
                    Venta</span>
                </mat-slide-toggle>
              </div>
              <div class="col-md" style="float: right !important;">
                <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1" type="button"
                  (click)="validarProformaSoloMaximoVenta();" style="float: right !important;">
                  <span><i class="fa fa-check" aria-hidden="true" style="color: #ffc107;"></i> Validar Porcentaje Vta
                    Permitido</span>
                </button>
              </div>
            </div>
          </mat-tab>

          <mat-tab label="Resultado de Validacion">
            <table mat-table [dataSource]="dataSource_validacion" class="mat-elevation-z8"
              style="white-space: normal !important;" multiTemplateDataRows>
              <!-- orden Column -->
              <ng-container matColumnDef="codControl">
                <th mat-header-cell *matHeaderCellDef class="mat-column-resultado-validacion text-center"> Cod. </th>
                <td mat-cell *matCellDef="let element" class="mat-column-resultado-validacion"
                  style="text-align: center !important; padding: 0 0px 0 0px !important"> {{ element.codControl }} </td>
              </ng-container>

              <!-- descripcion Column -->
              <ng-container matColumnDef="descripcion" style="width: 200px !important;">
                <th mat-header-cell *matHeaderCellDef class="mat-column-resultado-validacion">
                  DescripciÃ³n </th>
                <td mat-cell *matCellDef="let element" class="mat-column-resultado-validacion" style="text-align: left !important; 
                padding: 0 0px 0 0px !important;">{{ element.descripcion }}</td>
              </ng-container>

              <!-- valido Column -->
              <ng-container matColumnDef="valido">
                <th mat-header-cell *matHeaderCellDef class="mat-column-resultado-validacion text-center"> Valido </th>
                <td mat-cell *matCellDef="let element" class="mat-column-resultado-validacion"
                  style="text-align: center !important; padding: 0 0px 0 0px !important;color:rgb(202, 6, 6)">
                  <ng-container *ngIf="element.valido === 'SI'; else validoo">
                    <strong style="color:green">SI</strong>
                  </ng-container>
                  <ng-template #validoo>
                    <strong style="color:red">NO</strong>
                  </ng-template>
                </td>
              </ng-container>

              <!-- cod_servicio Column -->
              <ng-container matColumnDef="cod_servicio">
                <th mat-header-cell *matHeaderCellDef class="mat-column-resultado-validacion"> CodServ </th>
                <td mat-cell *matCellDef="let element" class="mat-column-resultado-validacion"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.codServicio }}</td>
              </ng-container>

              <!-- Descuento Servicio Column -->
              <ng-container matColumnDef="desct_servicio">
                <th mat-header-cell *matHeaderCellDef class="mat-column-resultado-validacion"> DescServ </th>
                <td mat-cell *matCellDef="let element" class="mat-column-resultado-validacion"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.descServicio }}
                </td>
              </ng-container>

              <!-- Dato A Column -->
              <ng-container matColumnDef="datoA">
                <th mat-header-cell *matHeaderCellDef class="mat-column-resultado-validacion"> Dato
                  A </th>
                <td mat-cell *matCellDef="let element" class="mat-column-resultado-validacion"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.datoA }} </td>
              </ng-container>

              <!-- Dato B Column -->
              <ng-container matColumnDef="datoB">
                <th mat-header-cell *matHeaderCellDef class="mat-column-resultado-validacion"> Dato
                  B </th>
                <td mat-cell *matCellDef="let element" class="mat-column-resultado-validacion"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">{{ element.datoB }}</td>
              </ng-container>

              <!-- Clave Servicio Column -->
              <ng-container matColumnDef="clave_servicio">
                <th mat-header-cell *matHeaderCellDef class="mat-column-resultado-validacion">ClaveServ</th>
                <td mat-cell *matCellDef="let element" class="mat-column-resultado-validacion"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">

                  <ng-container *ngIf="element.ClaveServicio === 'AUTORIZADO';else claveelse">
                    <p style="color: green;"><strong>{{ element.claveServicio }}</strong></p>
                  </ng-container>
                  <ng-template #claveelse>
                    <p style="color: red;">{{ element.claveServicio }}</p>
                  </ng-template>
                </td>
              </ng-container>

              <!-- Resolver Column -->
              <ng-container matColumnDef="resolver">
                <th mat-header-cell *matHeaderCellDef class="mat-column-resultado-validacion">
                  Resolver</th>
                <td mat-cell *matCellDef="let element" class="mat-column-resultado-validacion"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">
                  <ng-container *ngIf="element.accion === 'Pedir_Servicio';">
                    <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1"
                      style="margin-block-start: 9px;"
                      (click)="resolverValidacionEnValidar(element.datoA, element.datoB, element.descServicio, element.codServicio, element);">
                      <span><i class="fa fa-magic" aria-hidden="true" style="color: #ffc107;"></i></span>
                    </button>
                  </ng-container>

                  <ng-container *ngIf="element.accion === 'Confirmar_SiNo'">
                    <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1"
                      style="margin-block-start: 9px;" (click)="resolverValidacionEnValidarMensaje(element);">
                      <span><i class="fa fa-magic" aria-hidden="true" style="color: #ffc107;"></i></span>
                    </button>
                  </ng-container>

                  <!-- <ng-container *ngIf="element.datoA != '' && element.datoB !='' ">
                    <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1"
                      style="margin-block-start: 9px;" (click)="resolverValidacionEnValidarMensaje(element);">
                      <span><i class="fa fa-magic" aria-hidden="true" style="color: #ffc107;"></i></span>
                    </button>
                  </ng-container> -->
                </td>
              </ng-container>

              <!-- Detalle Obs. Column -->
              <ng-container matColumnDef="detalle_observacion">
                <th mat-header-cell *matHeaderCellDef class="mat-column-resultado-validacion">
                  Deta Obs</th>
                <td mat-cell *matCellDef="let element" class="mat-column-resultado-validacion"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">
                  <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1"
                    style="margin-block-start: 10px;margin-block-end: 10px;"
                    (click)="modalDetalleObservaciones(element.observacion, element.obsDetalle);">
                    <span><i class="fa fa-eye" aria-hidden="true" style="color: #ffc107;"></i>
                      Obs.</span>
                  </button>
                </td>
              </ng-container>

              <!-- Validar Column -->
              <ng-container matColumnDef="validar">
                <th mat-header-cell *matHeaderCellDef class="mat-column-resultado-validacion">
                  Validar</th>
                <td mat-cell *matCellDef="let element" class="mat-column-resultado-validacion"
                  style="text-align: center !important; padding: 0 0px 0 0px !important">
                  <button mat-raised-button class="btn btn-outline-secondary form-control-sm mr-1">
                    <span><i class="fa fa-check" aria-hidden="true" style="color: #ffc107;"></i></span>
                  </button>
                </td>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumns_validacion"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns_validacion;"></mat-row>
            </table>

            <div class="row fixed-bottom-bar">
              <div class="col-md" style="float: left;">
                <mat-slide-toggle (click)="validacionesTodosFilterToggle()" [checked]="toggleValidacionesAll">
                  <span style="color:#00db00 !important">Todos </span>
                </mat-slide-toggle>
              </div>
              <div class="col-md" style="float: left;">
                <mat-slide-toggle (click)="validacionesValidosFilterToggle()" [checked]="toggleValidos">
                  <span style="color:#00db00 !important">Solo Validos</span>
                </mat-slide-toggle>
              </div>
              <div class="col-md" style="float: left;">
                <mat-slide-toggle (click)="validacionesNOValidosFilterToggle()" [checked]="toggleNoValidos">
                  <span style="color:#00db00 !important">Solo No Validos</span>
                </mat-slide-toggle>
              </div>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
    </div>
    <!-- FinTabla -->

    <!-- inicioPiePagina -->
    <div class="row">
      <div class="col-md-10">
        <mat-tab-group class="miTabGroupProformaFooter" style="border-style: ridge;padding: 1px;" #tabGroupfooter>
          <mat-tab label="Datos">
            <form class="example-form" [formGroup]="FormularioData">
              <div class="row">
                <div class="col-md-12">
                  <div class="row">
                    <div class="col">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text form-control-sm"
                            style="padding: 10px 0px 0px 8px;border: 0 !important;">
                            <div *ngIf="submitted && f.transporte.invalid" class="invalid-feedback">
                              <mat-icon matTooltipClass="custom-tooltip" matTooltip="Validar Transporte">info
                              </mat-icon>
                            </div>
                            <u>Medio Transporte </u>
                          </span>
                        </div>
                        <select class="custom-select1 form-control-sm" style="margin-left: 5px;"
                          [(ngModel)]="transporte" formControlName="transporte"
                          [class.is-invalid]="f.transporte.invalid && (f.transporte.dirty || f.transporte.touched)">
                          <option value="FLOTA">FLOTA</option>
                          <option value="TRANSPORTADORA">TRANSPORTADORA</option>
                          <option value="CAMION PERTEC">CAMION PERTEC</option>
                          <option value="RECOGE CLIENTE">RECOGE CLIENTE</option>
                          <option value="LLEVA VENDEDOR">LLEVA VENDEDOR</option>
                          <option value="TAXI">TAXI</option>
                          <option value="CAMION">CAMION</option>
                          <option value="OTRO">OTRO</option>
                        </select>
                      </div>
                    </div>
                    <div class="col">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text form-control-sm"
                            style="padding: 10px 0px 0px 0px;border: 0 !important;">
                            <div *ngIf="submitted && f.nombre_transporte.invalid" class="invalid-feedback">
                              <mat-icon matTooltipClass="custom-tooltip" matTooltip="Validar Nombre Transporte">info
                              </mat-icon>
                            </div>
                            <u> Nombre Transporte </u>
                          </span>
                        </div>
                        <input type="text" class="form-control form-control-sm" style="margin-left: 5px;"
                          formControlName="nombre_transporte" [(ngModel)]="medio_transporte"
                          [class.is-invalid]="f.nombre_transporte.invalid && (f.nombre_transporte.dirty || f.nombre_transporte.touched)">
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text form-control-sm"
                            style="padding: 10px 0px 0px 8px;border: 0 !important;">
                            <div *ngIf="submitted && f.fletepor.invalid" class="invalid-feedback">
                              <mat-icon matTooltipClass="custom-tooltip" matTooltip="Validar Flete Por">info
                              </mat-icon>
                            </div>
                            <u>Flete Pagado Por</u>
                          </span>
                        </div>
                        <select class="custom-select1 form-control-sm" style="margin-left: 5px;"
                          formControlName="fletepor" [(ngModel)]="fletepor"
                          [class.is-invalid]="f.fletepor.invalid && (f.fletepor.dirty || f.fletepor.touched)">
                          <option value="OTROS">OTROS</option>
                          <option value="CLIENTE">CLIENTE</option>
                          <option value="PERTEC POR COBRAR">PERTEC POR COBRAR</option>
                        </select>
                      </div>
                    </div>

                    <div class="col-md-4">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text form-control-sm"
                            style="padding: 6px 0px 0px 16px;border: 0 !important;">
                            <div *ngIf="submitted && f.tipoentrega.invalid" class="invalid-feedback">
                              <mat-icon matTooltipClass="custom-tooltip" matTooltip="Validar T. Entrega">info
                              </mat-icon>
                            </div>
                            <u>T. Entrega</u>
                          </span>
                        </div>
                        <!-- <input type="text" class="form-control form-control-sm"
                          style="margin-left: 5px;background-color: #ffff00;color: black;"
                          formControlName="tipoentrega" [(ngModel)]="tipoentrega"
                          [class.is-invalid]="f.tipoentrega.invalid && (f.tipoentrega.dirty || f.tipoentrega.touched)"
                          readonly> -->
                        <input type="text" class="form-control form-control-sm"
                          style="margin-left: 5px;background-color: #ffff00;color: black;" formControlName="tipoentrega"
                          [(ngModel)]="tipoentrega" [readOnly]="true">

                        <div class="input-group-append">
                          <button class="btn btn-outline-primary form-control-sm" type="button"
                            style="border-color: #093070;" (click)="mandarEntregar()"><i class="fa fa-cog"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-2">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text form-control-sm"
                            style="padding: 10px 0px 0px 0px;border: 0 !important;">
                            <strong>Kgr.</strong>
                            {{ formatNumberTotalSubTOTALES(peso) }}</span>
                        </div>

                        <input type="number" class="form-control form-control-sm" style="margin-left: 5px;"
                          placeholder="0.00" formControlName="peso" [(ngModel)]="peso" hidden="true" readonly>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <div class="row">
                    <div class="col-md-3">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text form-control-sm"
                            style="padding: 0px 0px 0px 61px;border: 0 !important;"><u>Latitud</u></span>
                        </div>
                        <span style="padding-top: 5px;padding-left: 14px;">{{ latitud_cliente }}</span>
                        <input type="text" [(ngModel)]="latitud_cliente" formControlName="latitud_entrega" hidden>
                      </div>
                    </div>

                    <div class="col-md-3">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text form-control-sm"
                            style="padding: 0px 0px 0px 0px;border: 0 !important;"><u>Longitud</u></span>
                        </div>
                        <span style="padding-top: 5px;padding-left: 14px;">{{ longitud_cliente }}</span>
                        <input type="text" [(ngModel)]="longitud_cliente" formControlName="longitud_entrega" hidden>
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="input-group">
                        <a href="{{ URL_maps }}" target="_blank">
                          <mat-icon> my_location</mat-icon>
                        </a>
                        <span class="input-group-text form-control-sm"
                          style="padding: 0px 0px 0px 0px;border: 0 !important;"><u>UbicaciÃ³n</u>
                        </span>
                        <ng-container>
                          <input type="text" class="input-group-text form-control-sm" style="margin-left: 5px;"
                            formControlName="ubicacion" [(ngModel)]="ubicacion_central" [readonly]="true">
                        </ng-container>

                        <span class="input-group-text form-control-sm"
                          style="padding: 10px 0px 0px 4px;border: 0 !important;">
                          <u>Orden de Compra</u>
                        </span>

                        <input type="text" class="form-control form-control-sm" style="margin-left: 5px;"
                          [readOnly]="true" formControlName="odc">
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text form-control-sm"
                            style="padding: 28px 0px 0px 48px;border: 0 !important;">
                            <u>DirecciÃ³n</u></span>
                        </div>
                        <textarea class="form-control" [(ngModel)]="direccion" rows="2" id="inputCatalogoDireccion"
                          style="font-size: 0.79rem !important;margin-left: 6px;height: 41px !important;"
                          formControlName="direccion" readonly>
                        </textarea>

                        <div class="input-group-append">
                          <button class="btn btn-outline-primary form-control-sm" type="button"
                            (click)="modalClientesDireccion(codigo_cliente_catalogo_real);"
                            style="border-color: #093070;height: calc(2.3rem + 5px) !important;">
                            <i class="fa fa-cog"></i>
                          </button>
                        </div>
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="row">
                        <div class="col">
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text form-control-sm"
                                style="padding: 17px 0px 0px 6px;border: 0 !important;">
                                <u>ObservaciÃ³n</u>
                              </span>
                            </div>
                            <input class="form-control" formControlName="obs" [(ngModel)]="obs"
                              style="margin-left: 5px;">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </mat-tab>

          <mat-tab label="Anticipo Ventas Contado">
            <div class="row">
              <form class="example-form" [formGroup]="FormularioData">
                <div class="col-md">
                  <div class="row">
                    <div class="col">
                      <div class="input-group">
                        <mat-checkbox class="example-margin" formControlName="pago_contado_anticipado"
                          (click)="enabledPagoFormaAnticipada(true, pago_contado_anticipado);"
                          [(ngModel)]="pago_contado_anticipado"></mat-checkbox>
                        <div class="input-group-prepend">
                          <span class="input-group-text form-control-sm"
                            style="padding: 10px 0px 0px 5px;border: 0 !important;"><u>El Pago se
                              Realiza de Forma Anticipada</u></span>
                        </div>
                      </div>

                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text form-control-sm"
                            style="padding: 10px 0px 0px 0px;border: 0 !important;">
                            <u>Total Anticipo Aplicado: </u> &nbsp;
                            <strong>{{ monto_anticipo }} - {{ moneda_get_catalogo }}</strong>
                          </span>
                        </div>
                        <!-- <input type="text" class="form-control form-control-sm" style="margin-left: 5px;
                          width: 15% !important;text-align: right;" formControlName="monto_anticipo"
                          [(ngModel)]="monto_anticipo" placeholder="0.00" min="0" value="0" disabled> -->

                      </div><br>
                      <div style="text-align: center;">
                        <!-- <button class="btn btn-outline-primary form-control-sm" type="button"
                          (click)="modalAnticiposProforma();" [disabled]="!anticipo_button"
                          style="border-color: #ffc107;"><i class="fa fa-archive"></i> Asignar Anticipo
                        </button> -->

                        <button class="btn btn-outline-primary form-control-sm" type="button"
                          [disabled]="!pago_contado_anticipado" (click)="modalAnticiposProforma();"
                          style="border-color: #ffc107;">
                          <i class="fa fa-archive"></i> Asignar Anticipo
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </mat-tab>

          <mat-tab label="Cliente Real - Referencial">
            <form class="example-form" [formGroup]="FormularioData">
              <div class="row">
                <div class="col-md-6">
                  <div class="row">
                    <div class="col">
                      <div class="input-group-prepend text-center p-2">
                        <span class="input-group-text form-control-sm"
                          style="padding: 10px 0px 0px 0px;border: 0 !important;">
                          <u>El Cliente Referencia-Real que realiza el pedido es:</u></span>
                      </div>
                      <div style="display:  -webkit-box;flex-direction:column;">
                        <input type="text" class="form-control form-control-sm"
                          style="margin-left: 5px;width: 20% !important;" [(ngModel)]="codigo_cliente_catalogo_real"
                          formControlName="codcliente_real">
                        <span> {{ nombre_cliente_catalogo_real }}</span>
                      </div><br>
                      <div>
                        <button class="btn btn-outline-primary form-control-sm" type="button"
                          style="float: left;margin-left: 5px;" [disabled]="!codigo_cliente"
                          (click)="definirClienteReferencia(codigo_cliente);">
                          <i class="fa fa-cog"></i> Definir Cliente Referencia
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </mat-tab>

          <mat-tab label="Descuentos de Linea de Solicitud">
            <div class="row">
              <div class="col-md">
                <div class="row p-2">
                  <form class="example-form" [formGroup]="FormularioData">
                    <div class="col">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text form-control-sm" style="margin-block-start: 8px;">
                            <u>Habilitar Descuentos de LÃ­nea SÃ©gun Solicitud</u>
                          </span>

                          <mat-checkbox [(ngModel)]="habilitar_desct_sgn_solicitud"
                            formControlName="desclinea_segun_solicitud">
                          </mat-checkbox>
                        </div>
                      </div>
                    </div>

                    <div class="col">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text form-control-sm"
                            style="padding: 10px 0px 0px 0px;border: 0 !important;"><u>ID de Tipo</u></span>
                        </div>
                        <mat-select *ngFor="let desct_linea_id_tipos of desct_linea_id_tipo"
                          style="margin-left: 5px;border: 1px solid black; width: 81% !important;"
                          [(ngModel)]="id_solicitud_desct">
                          <mat-option value="desct_linea_id_tipos.codigo">
                            {{ desct_linea_id_tipos.codigo }} -
                            {{ desct_linea_id_tipos.descripcion }}
                          </mat-option>
                        </mat-select>
                        <input type="text" [(ngModel)]="id_solicitud_desct" hidden="true">
                      </div><br>
                      <!-- <button class="btn btn-outline-primary form-control-sm" type="button"
                        style="border-color: #ffc107;">
                        <i class="fa fa-archive"></i> Solicitud Descuentos de Nivel
                      </button> Realizar Ventana? -->
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </mat-tab>

          <mat-tab label="Complementar Proforma">
            <div class="row">
              <div class="col-md-4">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text form-control-sm"
                      style="padding: 0px 8px 6px 5px;;border: 0 !important;">
                      <u>Complementar Proforma</u></span>
                  </div>

                  <mat-slide-toggle class="example-margin" [(ngModel)]="disableSelectComplemetarProforma"
                    (change)="habilitarComplementarProforma()">
                  </mat-slide-toggle>
                  <!-- Valor: {{ disableSelectComplemetarProforma }} -->
                </div>
              </div>

              <div class="col-md-8">
                <form class="example-form" [formGroup]="FormularioData">
                  <mat-label>Eliga una OpciÃ³n</mat-label>
                  <mat-select class="custom-select1 form-control-sm" [disabled]="!disableSelectComplemetarProforma"
                    [(ngModel)]="tipo_complementopf_input" formControlName="tipo_complementopf">

                    <mat-option [value]=3>Elija una opcion...</mat-option>
                    <mat-option [value]=0>1. Dimediado - Precio Mayorista Para Cumplir
                      Monto Minimo
                    </mat-option>
                    <mat-option [value]=1>2. Para Cumplir Monto Minimo Para Aplicar
                      Descuento Extra
                    </mat-option>
                  </mat-select>

                  <!-- VALOR:{{ tipo_complementopf_input }} -->

                  <div class="input-group">
                    <mat-select class="custom-select1 form-control-sm" [(ngModel)]="idpf_complemento_view"
                      formControlName="idpf_complemento" [disabled]="!disableSelectComplemetarProforma">
                      <mat-option *ngFor="let ids_complementar_proformas of ids_complementar_proforma"
                        [value]="ids_complementar_proformas.id">
                        {{ ids_complementar_proformas.id }} -
                        {{ ids_complementar_proformas.descripcion }}
                      </mat-option>
                    </mat-select>

                    <input type="number" class="form-control form-control-sm" style="margin-left: 5px;"
                      formControlName="nroidpf_complemento" placeholder="0"
                      [disabled]="!disableSelectComplemetarProforma" [(ngModel)]="nroidpf_complemento_view">

                    <div class="input-group-append">
                      <button class="btn btn-outline-primary form-control-sm" type="button"
                        style="border-color: #ffc107;" [disabled]="!disableSelectComplemetarProforma"
                        (click)="buscadorIDComplementarProforma(idpf_complemento_view, nroidpf_complemento_view);">
                        <i class="fa fa-search"></i>
                      </button>
                    </div>
                  </div>

                  <div class="input-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text form-control-sm" style="border: 0 !important;">
                        <u>Fecha Aut
                          Proforma:
                        </u></span>{{ complemento_proforma?.fechaaut_pfcomplemento | date:'yyyy-mm-dd'}}
                    </div>
                  </div>

                  <div class="input-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text form-control-sm" style="border: 0 !important;">
                        <u>SubTotal Proforma: </u></span>
                      {{ complemento_proforma?.subtotal_pfcomplemento | number:'1.2-2' }}
                    </div>
                  </div>

                  <div class="input-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text form-control-sm" style="border: 0 !important;">
                        <u>Total Proforma: </u></span>
                      {{  complemento_proforma?.total_pfcomplemento | number:'1.2-2'}}
                      {{ complemento_proforma?.moneda_total_pfcomplemento }}
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </mat-tab>

          <mat-tab label="Ultimas-Proformas">
            <table mat-table [dataSource]="dataSourceUltimasProformas" class="mat-elevation-z8 text-center"
              multiTemplateDataRows style="text-align: center !important; padding: 0px 0px 0px 0px !important">

              <!-- COD PROFORMA Column -->
              <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef class="center1"> ID </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.id }}</td>
              </ng-container>

              <!-- ID Column -->
              <ng-container matColumnDef="numero_id">
                <th mat-header-cell *matHeaderCellDef class="center1"> Numero ID </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.numeroid }}</td>
              </ng-container>

              <!-- Cod. Cliente Column -->
              <ng-container matColumnDef="cod_cliente">
                <th mat-header-cell *matHeaderCellDef class="center1"> Cod. Cliente </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.codcliente }}</td>
              </ng-container>

              <!-- Cod. Cliente Real Column -->
              <ng-container matColumnDef="cliente_real">
                <th mat-header-cell *matHeaderCellDef class="center1"> Cod. Cliente Real</th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.codcliente_real }}</td>
              </ng-container>

              <!-- Cod. Cliente Real Column -->
              <ng-container matColumnDef="nombre_cliente">
                <th mat-header-cell *matHeaderCellDef class="center1"> Nombre</th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.nomcliente }}</td>
              </ng-container>

              <!-- NIT Column -->
              <ng-container matColumnDef="nit">
                <th mat-header-cell *matHeaderCellDef class="center1"> NIT </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.nit }}</td>
              </ng-container>

              <!-- Fecha Column -->
              <ng-container matColumnDef="fecha">
                <th mat-header-cell *matHeaderCellDef class="center1"> Fecha </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.fecha | date:'yyyy-MM-dd' }}</td>
              </ng-container>

              <!-- Moneda Column -->
              <ng-container matColumnDef="item">
                <th mat-header-cell *matHeaderCellDef class="center1"> Moneda </th>
                <td mat-cell *matCellDef="let element" class="center1"> {{ element.codmoneda }} </td>
              </ng-container>

              <!-- Total Column -->
              <ng-container matColumnDef="total">
                <th mat-header-cell *matHeaderCellDef class="center2"> Total </th>
                <td mat-cell *matCellDef="let element" class="center2">
                  {{ formatNumberTotalSubTOTALES(element.total) }} </td>
              </ng-container>

              <!-- Aprobada Column -->
              <ng-container matColumnDef="aprobada">
                <th mat-header-cell *matHeaderCellDef class="center1"> Aprobada </th>
                <td mat-cell *matCellDef="let element" class="center1">
                  <ng-container *ngIf="element.aprobada === true; else aprbd">
                    <input type="checkbox" [checked]="true" (click)="onNoClick($event)">
                  </ng-container>
                  <ng-template #aprbd>
                    <input type="checkbox" [checked]="false" (click)="onNoClick($event)">
                  </ng-template>
                </td>
              </ng-container>

              <!-- Transferida Column -->
              <ng-container matColumnDef="transferida">
                <th mat-header-cell *matHeaderCellDef class="center1"> Transferida </th>
                <td mat-cell *matCellDef="let element" class="center1">
                  <ng-container *ngIf="element.transferida === true; else trsf">
                    <input type="checkbox" [checked]="true" (click)="onNoClick($event)">
                  </ng-container>
                  <ng-template #trsf>
                    <input type="checkbox" [checked]="false" (click)="onNoClick($event)">
                  </ng-template>
                </td>
              </ng-container>

              <mat-header-row *matHeaderRowDef="displayedColumns_ultimas_proformas"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns_ultimas_proformas;"></mat-row>
            </table>
          </mat-tab>

          <mat-tab label="Ultimas Ventas Item 23 Dias">
            <table mat-table [dataSource]="dataSource__venta_23_dias" class="mat-elevation-z8 text-center" matSort
              multiTemplateDataRows style="text-align: center !important; padding: 0px 0px 0px 0px !important">

              <!-- Total Column -->
              <ng-container matColumnDef="item">
                <th mat-header-cell *matHeaderCellDef class="center1"> Item </th>
                <td mat-cell *matCellDef="let element" class="center1"> {{ element.coditem }}</td>
              </ng-container>

              <!-- COD PROFORMA Column -->
              <ng-container matColumnDef="codproforma">
                <th mat-header-cell *matHeaderCellDef class="center1"> Cod. Prof </th>
                <td mat-cell *matCellDef="let element" class="center1"></td>
              </ng-container>

              <!-- ID Column -->
              <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef class="center1"> ID </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.id }}</td>
              </ng-container>

              <!-- Numero I Column -->
              <ng-container matColumnDef="numero_id">
                <th mat-header-cell *matHeaderCellDef class="center1"> # ID </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.numeroid }}</td>
              </ng-container>

              <!-- Cod. Cliente Column -->
              <ng-container matColumnDef="cod_cliente">
                <th mat-header-cell *matHeaderCellDef class="center1"> Cod. Cliente </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.codcliente }}</td>
              </ng-container>

              <!-- Cod. Cliente Real Column -->
              <ng-container matColumnDef="cod_cliente_real">
                <th mat-header-cell *matHeaderCellDef class="center1"> Cod. Cliente Real</th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.codcliente_real }}</td>
              </ng-container>

              <!-- Cod. Cliente Real Column -->
              <ng-container matColumnDef="nom_cliente">
                <th mat-header-cell *matHeaderCellDef class="center1"> Cliente</th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.nomcliente }}</td>
              </ng-container>

              <!-- NIT Column -->
              <ng-container matColumnDef="nit">
                <th mat-header-cell *matHeaderCellDef class="center1"> NIT </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.nit }}</td>
              </ng-container>

              <!-- Fecha Column -->
              <ng-container matColumnDef="fecha">
                <th mat-header-cell *matHeaderCellDef class="center1"> Fecha </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.fecha | date:'yyyy-mm-dd' }}</td>
              </ng-container>

              <!-- Total Column -->
              <ng-container matColumnDef="total">
                <th mat-header-cell *matHeaderCellDef class="center1"> Total </th>
                <td mat-cell *matCellDef="let element" class="center2">{{ element.total }}</td>
              </ng-container>

              <!-- Cantidad Column -->
              <ng-container matColumnDef="cantidad">
                <th mat-header-cell *matHeaderCellDef class="center1"> Cantidad </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.cantidad }}</td>
              </ng-container>

              <!-- Moneda Column -->
              <ng-container matColumnDef="moneda">
                <th mat-header-cell *matHeaderCellDef class="center1"> Moneda </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.codmoneda }}</td>
              </ng-container>

              <!-- Aprobada Column -->
              <ng-container matColumnDef="aprobada">
                <th mat-header-cell *matHeaderCellDef class="center1"> Aprobada </th>
                <td mat-cell *matCellDef="let element" class="center1">
                  <ng-container *ngIf="element.aprobada === true; else aprbd">
                    <input type="checkbox" [checked]="true" (click)="onNoClick($event)">
                  </ng-container>
                  <ng-template #aprbd>
                    <input type="checkbox" [checked]="false" (click)="onNoClick($event)">
                  </ng-template>
                </td>
              </ng-container>

              <!-- Transferida Column -->
              <ng-container matColumnDef="transferida">
                <th mat-header-cell *matHeaderCellDef class="center1"> Transferida </th>
                <td mat-cell *matCellDef="let element" class="center1">
                  <ng-container *ngIf="element.transferida === true; else trans1">
                    <input type="checkbox" [checked]="true" (click)="onNoClick($event)">
                  </ng-container>
                  <ng-template #trans1>
                    <input type="checkbox" [checked]="false" (click)="onNoClick($event)">
                  </ng-template>
                </td>
              </ng-container>

              <mat-header-row *matHeaderRowDef="displayedColumns_venta_23_dias"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns_venta_23_dias;"></mat-row>
            </table>
          </mat-tab>

          <mat-tab label="Precios - Descuento Especial">
            <table mat-table [dataSource]="dataSource_precios_desct" class="mat-elevation-z8 text-center"
              multiTemplateDataRows matSort>

              <!-- COD PROFORMA Column -->
              <ng-container matColumnDef="codproforma">
                <th mat-header-cell *matHeaderCellDef class="center1"> Item </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.coditem }}</td>
              </ng-container>

              <!-- ID Column -->
              <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef class="center1"> DescripciÃ³n </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.descripcion }}</td>
              </ng-container>

              <!-- Numero I Column -->
              <ng-container matColumnDef="numero_id">
                <th mat-header-cell *matHeaderCellDef class="center1">Medida</th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.medida }}</td>
              </ng-container>

              <!-- Cod. Cliente Column -->
              <ng-container matColumnDef="cod_cliente">
                <th mat-header-cell *matHeaderCellDef class="center1"> Cantidad </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.cantidad }}</td>
              </ng-container>

              <!-- Cod. Cliente Real Column -->
              <ng-container matColumnDef="cod_cliente_real">
                <th mat-header-cell *matHeaderCellDef class="center1">Empaque</th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.empaque_caja_cerrada }}</td>
              </ng-container>

              <!-- Cod. Cliente Real Column -->
              <ng-container matColumnDef="nom_cliente">
                <th mat-header-cell *matHeaderCellDef class="center1"> % Sugerencia</th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.porcentaje }}</td>
              </ng-container>

              <!-- NIT Column -->
              <ng-container matColumnDef="nit">
                <th mat-header-cell *matHeaderCellDef class="center1" style="white-space: normal;">
                  Cantidad Limites de % </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.cantidad_porcentaje }}</td>
              </ng-container>

              <!-- Fecha Column -->
              <ng-container matColumnDef="fecha">
                <th mat-header-cell *matHeaderCellDef class="center1" style="white-space: normal;">
                  Cantidad Sugerida (+/-) </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.cantidad_sugerida }}</td>
              </ng-container>

              <!-- Total Column -->
              <ng-container matColumnDef="total">
                <th mat-header-cell *matHeaderCellDef class="center1" style="white-space: normal;">
                  Cantidad Sugerida Aplicable </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.cantidad_sugerida_aplicable }}</td>
              </ng-container>

              <!-- Total Column -->
              <ng-container matColumnDef="item">
                <th mat-header-cell *matHeaderCellDef class="center1" style="white-space: normal;"> Dif. Cant.
                  Aplicable - Cant Limite </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.diferencia }}</td>
              </ng-container>

              <!-- Cantidad Column -->
              <ng-container matColumnDef="cantidad">
                <th mat-header-cell *matHeaderCellDef class="center1"> ObservaciÃ³n </th>
                <td mat-cell *matCellDef="let element" class="center1">{{ element.obs }}</td>
              </ng-container>

              <!-- Aplicar Column -->
              <ng-container matColumnDef="moneda">
                <th mat-header-cell *matHeaderCellDef class="center1"> Aplicar
                  <mat-icon (click)="restablecerContadorClickSugerirCantidad()">done</mat-icon>
                </th>
                <td mat-cell *matCellDef="let element" class="center1">
                  <ng-container
                    *ngIf="element.obs !== 'No Cumple.' && element.obs !== 'Cumple Empaque Cerrado.' else obsNoCumple">
                    <button class="btn btn-outline-secondary form-control-sm" type="button" matTooltip="Aplicar"
                      matTooltipClass="custom-tooltip"
                      (click)="aplicarCantidadSugeridadParaCumplirEmpaque(this.dataSource, element);">
                      Aplicar <mat-icon>done</mat-icon>
                    </button>
                  </ng-container>

                  <ng-template #obsNoCumple></ng-template>
                </td>
              </ng-container>

              <!-- Restaurar Column -->
              <ng-container matColumnDef="aprobada">
                <th mat-header-cell *matHeaderCellDef class="center1"> Restaurar <mat-icon>launch</mat-icon>
                </th>
                <td mat-cell *matCellDef="let element" class="center1">
                  <ng-container
                    *ngIf="element.obs !== 'No Cumple.' && element.obs !== 'Cumple Empaque Cerrado.'else obsNoCumpleRes">
                    <button class="btn btn-outline-secondary form-control-sm" type="button" matTooltip="Restaurar"
                      matTooltipClass="custom-tooltip"
                      (click)="restaurarCantidadSugeridadParaCumplirEmpaque(this.dataSource, element)">
                      Restaurar <mat-icon>launch</mat-icon>
                    </button>
                  </ng-container>
                  <ng-template #obsNoCumpleRes></ng-template>
                </td>
              </ng-container>

              <!-- Transferida Column -->
              <!-- <ng-container matColumnDef="transferida">
                <th mat-header-cell *matHeaderCellDef class="center1"> Transferida </th>
                <td mat-cell *matCellDef="let element" class="center1">
                  <input type="checkbox">
                </td>
              </ng-container> -->
              <mat-header-row *matHeaderRowDef="displayedColumns_precios_desct"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns_precios_desct;"></mat-row>
            </table>

            <div class="row" style="position: sticky;bottom: 0px;">
              <div style="margin-left: 7px;">
                <button class="btn btn-outline-primary form-control-sm" type="button"
                  style="background-color: #ffff00;font-size: 0.7rem !important;padding: 0rem 0.12rem !important;"
                  (click)="aplicarDescuentoEspecialSegunTipoPrecio();">
                  <i class="fa fa-plus-square" aria-hidden="true"></i> Aplicar Desc. Especial S/Tipo Precio
                </button>

                <button class="btn btn-outline-primary form-control-sm" type="button" (click)="borrarDesct();"
                  style="background-color: #ffff00;font-size: 0.7rem !important;padding: 0rem 0.12rem !important;">
                  <i class="fa fa-eraser"></i> Borrar Desc.
                </button>

                <button class="btn btn-outline-primary form-control-sm" type="button"
                  (click)="validarEmpaqueDescEspc();"
                  style="background-color: #ffff00;font-size: 0.7rem !important;padding: 0rem 0.12rem !important;">
                  <i class="fa fa-inbox red" aria-hidden="true"></i> Validar Empaque Desc. Espc.
                </button>

                <button class="btn btn-outline-primary form-control-sm" type="button"
                  (click)="sugerirCantidadDescEspecial();"
                  style="background-color: #ffff00;font-size: 0.7rem !important;padding: 0rem 0.12rem !important;">
                  <i class="fa fa-comments" aria-hidden="true"></i> Sugerir Cantidad Desc. Especial
                </button>

                <button class="btn btn-outline-primary form-control-sm" type="button" (click)="aplicarCantidadSugeridadParaCumplirEmpaqueATODO(this.dataSource,
                  this.dataSource_precios_desct);"
                  style="background-color: #ffff00;font-size: 0.7rem !important;padding: 0rem 0.12rem !important;">
                  <i class="fa fa-check"></i> Aplicar a Todos
                </button>

                <button class="btn btn-outline-primary form-control-sm" type="button" (click)="restaurarCantidadSugeridadParaCumplirEmpaqueATODO(this.dataSource,
                  this.dataSource_precios_desct);"
                  style="background-color: #ffff00;font-size: 0.7rem !important;padding: 0rem 0.12rem !important;">
                  <mat-icon class="green">restore_page</mat-icon> Restaurar Todos
                </button>

                <button class="btn btn-outline-primary form-control-sm" type="button"
                  (click)="dividirItemsParaCumplirCajaCerrada();"
                  style="background-color: #ff8c00;font-size: 0.7rem !important;padding: 0rem 0.12rem !important;">
                  <i class="fa fa-tags" aria-hidden="true"></i> Dividir Items Para Cumplir Emp Caj Cerrada
                </button>
              </div>
            </div>
          </mat-tab>

          <mat-tab label="Descuentos de PromociÃ³n">
            <div class="row p-2">
              <form class="example-form" [formGroup]="FormularioData">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text form-control-sm" style="margin-left: 16px;border: 0 !important;">
                      <u>Aplicar Desct. de Nivel Actuales del Cliente</u></span>
                  </div>
                  <!-- <select style="margin-left: 5px;" [(ngModel)]="desct_nivel_actual" [value]="desct_nivel_actual"
                  formControlName="niveles_descuento" style="width: 18%;">
                  <option value="ACTUAL">ACTUAL</option>
                  <option value="ANTERIOR">ANTERIOR</option>
                </select> -->
                </div>

                <div class="col-md">
                  <input type="text" [(ngModel)]="fecha" formControlName="fecha" hidden>
                  <input type="text" [ngModel]="fecha_reg" formControlName="fechareg" hidden>
                  <input type="text" [(ngModel)]="fecha_confirmada" formControlName="fecha_confirmada" hidden>
                  <input type="text" [(ngModel)]="fechaaut" formControlName="fechaaut" hidden>
                  <input type="text" [(ngModel)]="fecha_inicial" formControlName="fecha_inicial" hidden>
                  <input type="text" [ngModel]="horareg" formControlName="horareg" hidden>
                  <input type="text" [(ngModel)]="hora" formControlName="hora" hidden>
                  <input type="text" [(ngModel)]="usuarioreg" formControlName="usuarioreg" hidden>
                  <input type="text" [ngModel]="horaaut" formControlName="horaaut" hidden>
                  <input type="text" [(ngModel)]="hora_inicial" formControlName="hora_inicial" hidden>
                  <input type="text" [(ngModel)]="hora_confirmada" formControlName="hora_confirmada" hidden>

                  <input type="text" [(ngModel)]="usuarioLogueado" formControlName="usuarioLogueado" hidden>
                  <input type="text" [(ngModel)]="fecha_actual_server" formControlName="fecha_actual_server" hidden>
                </div>
              </form>

              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text form-control-sm"
                    style="padding: 10px 0px 0px 116px;border: 0 !important;">
                    <u>Precio Principal del Pedido</u>
                  </span>
                </div>
                <input type="number" style="margin-left: 6px;" [value]="tarifaPrincipal_value" readonly>
                <div class="input-group-append">
                  <button class="btn btn-outline-primary form-control-sm" type="button" disabled
                    (click)="getPrecioMayorEnDetalle();" style="border-color: #ffc107;">
                    <i class="fa fa-check"></i>
                  </button>
                </div>
              </div>

              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text form-control-sm"
                    style="padding: 10px 0px 0px 129px;border: 0 !important;">
                    <u>Tipo Descuento de Nivel</u></span>
                </div>

                <select style="margin-left: 5px;" [(ngModel)]="tipo_desct_nivel" disabled>
                  <option *ngFor="let valor_desct_nivels of valor_desct_nivel" [value]="valor_desct_nivels.desc_nivel">
                    {{ valor_desct_nivels.desc_nivel }}</option>
                </select>&nbsp;

                <div class="input-group-append">
                  <button class="btn btn-outline-primary form-control-sm" type="button" disabled
                    style="border-color: #ffc107;" (click)="aplicarDescuentoNivel()" readonly="!tarifaPrincipal_value">
                    <i class="fa fa-cog"> Aplicar Descuento</i>
                  </button>
                </div>
              </div>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>

      <!-- inicioTotales -->
      <div class="col-md-2"
        style="padding-block-start: 2px; padding-right: 4.5px !important;padding-left: 3.5px !important;">
        <form class="example-form" [formGroup]="FormularioData">
          <div class="row" style="height: calc(1.4rem + 2px) !important;">
            <div class="col">
              <span class="input-group-text form-control-sm"
                style="border: 0 !important;padding: 5px 0px 0px 0px;"><u>Sub Total</u>
              </span>
            </div>

            <div class="col text-right">
              <span>{{ (formatNumberTotalSubTOTALES(subtotal) ) }}</span>
              <input type="text" [(ngModel)]="subtotal" formControlName="subtotal" [hidden]="true">
            </div>

            <div class="col text-right">
              <button class="btn btn-outline-primary form-control-sm" type="button" style="border-color: #093070;"
                (click)="modalSubTotal();">
                <mat-icon>monetization_on</mat-icon>
              </button>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <span class="input-group-text form-control-sm"
                style="padding: 5px 0px 0px 0px;border: 0 !important;"><u>Recargos</u></span>
            </div>
            <div class="col text-right">
              <span>{{ formatNumberTotalSubTOTALES(recargos) }} </span>
              <input type="text" [(ngModel)]="recargos" formControlName="recargos" [hidden]="true">
            </div>
            <div class="col text-right">
              <button class="btn btn-outline-primary form-control-sm" type="button" style="border-color: #093070;"
                (click)="modalRecargos();" disabled="true">
                <!-- [disabled]="total === 0" -->
                <mat-icon>monetization_on</mat-icon>
              </button>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <span class="input-group-text form-control-sm"
                style="padding: 0px 0px 0px 0px;border: 0 !important;"><u>Descuento</u></span>
            </div>
            <div class="col text-right">
              <span> {{ formatNumberTotalSubTOTALES(des_extra) }}</span>
              <input type="number" [(ngModel)]="des_extra" formControlName="des_extra" hidden="true">
            </div>
            <div class="col text-right">
              <button class="btn btn-outline-primary form-control-sm" type="button" style="border-color: #093070;"
                (click)="modalDescuentosTotales();">
                <mat-icon>monetization_on</mat-icon>
              </button>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <span class="input-group-text form-control-sm"
                style="padding: 5px 0px 0px 0px;border: 0 !important;"><u>IVA</u></span>
            </div>
            <div class="col text-right">
              <span>{{ formatNumberTotalSubTOTALES(iva) }}</span>
              <input type="text" [(ngModel)]="iva" formControlName="iva" [hidden]="true">
            </div>
            <div class="col text-right">
              <button class="btn btn-outline-primary form-control-sm" type="button" style="border-color: #093070;"
                (click)="modalIva();">
                <mat-icon>monetization_on</mat-icon>
              </button>
            </div>
          </div>

          <div class="row" style="height: calc(1.4rem + 2px) !important;">
            <div class="col">
              <span class="input-group-text form-control-sm"
                style="padding: 5px 0px 0px 0px;border: 0 !important;"><u>Total</u></span>
            </div>
            <div class="col text-right">
              <span>{{ formatNumberTotalSubTOTALES(total) }}</span>
              <input type="text" [(ngModel)]="total" formControlName="total" [hidden]="true">
            </div>
            <div class="col text-right">
              <button class="btn btn-outline-primary form-control-sm" type="button" style="border-color: #093070;"
                (click)="totabilizar();">
                <mat-icon>monetization_on</mat-icon>
              </button>
            </div>
          </div>
        </form>

        <!-- BTN ABAJO TOTAL -->
        <div class="row">
          <div class="col-md">
            <div class="text-left">
              <ng-container *ngIf="estado_proforma === 'ANULADA'">
                <span class="form-control-sm"
                  style="border: 0 !important;background-color: black;color:#ef4d4d; padding: 5px;">
                  <strong>ANULADA</strong></span>
              </ng-container>

              <ng-container *ngIf="estado_proforma === 'APROBADA'">
                <span class="form-control-sm"
                  style="padding: 5px;border: 0 !important;background-color: black;color:#bfff00">
                  <strong>APROBADA</strong></span>
              </ng-container>

              <ng-container *ngIf="estado_proforma === 'TRANSFERIDA'">
                <span class="form-control-sm"
                  style="padding: 5px;border: 0 !important;background-color: black;color:#00ff00">
                  <strong>TRANSFERIDA</strong></span>
              </ng-container>

              <ng-container *ngIf="estado_proforma === 'NO APROBADA'">
                <span class="form-control-sm"
                  style="padding: 5px;border: 0 !important;background-color: black;color:#40E0D0">
                  <strong>NO APROBADA</strong></span>
              </ng-container>

              <!-- <button mat-raised-button (click)="fileInput.click()" style="height: 20px !important;font-size: 0.8rem;background-color: #fbd800;
                  padding: 0 11px 0 11px;" matTooltipClass="custom-tooltip" matTooltip="Importar ZIP Proforma"><i
                  class="fa fa-file-archive " aria-hidden="true"></i>
                  </button> -->
              <!-- <input type="file" #fileInput (change)="onFileChange($event)" accept=".zip" style="display: none;" /> -->

              <!-- <button mat-raised-button (click)="modalSolicitudUrgente();"
                    style="height: 20px !important;font-size: 0.8rem;background-color: #fbd800;">
                    <mat-icon style="margin-left: 10px;margin-right: 10px;">flip_to_front</mat-icon>
                    Solicitar Urgente
                  </button> -->
            </div>
          </div>

          <div class="col-md">
            <div class="text-right">
              <button mat-button mat-raised-button style="height: 20px !important;background-color: #fbd800;"
                [matMenuTriggerFor]="menu">
                Descuentos
              </button>

              <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="aplicarDesctPorDepositoHTML();">
                  <i class="fa fa-check green" aria-hidden="true"></i> Apli. Desc. Deposito
                </button>
                <button mat-menu-item (click)="quitarDescDeposito23();">
                  <i class="fa fa-times red" aria-hidden="true"></i> Quitar Desc. Deposito
                </button>
              </mat-menu>
            </div>
          </div>
        </div>
        <!-- FIN BTN ABAJO TOTAL -->
      </div>
      <!-- finTotales -->
    </div>
    <!-- finpiePagina -->

    <div mat-dialog-footer class="footersito">
      <div class="row">
        <div class="col-md-10">
          <!-- Saldos -->
          <div class="row pl-2">
            <input type="text" class="inputsSaldos inputsSaldos2"
              value="{{ almacn_parame_usuario_almacen }}: {{ saldoItem }}"
              style="font-size: 0.8rem;width:9%;background-color: black;color: rgb(230, 230, 0);" [readOnly]="true"
              placeholder="0.00">

            <ng-container *ngFor="let almacenes_saldoss of almacenes_saldos">
              <span style="padding: 3px 5px 0px 3px;"><strong>{{ almacenes_saldoss.codalmsald1 }}:</strong></span>
              <input type="text" class="inputsSaldos inputsSaldos2" [ngModel]="saldo_modal_total_1"
                style="font-size: 0.8rem;width:7%;background-color: black;color: #00c600;cursor: pointer;"
                (click)="modalSaldos(almacenes_saldoss.codalmsald1, 1);" [readOnly]="true" placeholder="0.00">

              <span style="padding: 3px 5px 0px 3px;"><strong>{{ almacenes_saldoss.codalmsald2 }}:</strong></span>
              <input type="text" class="inputsSaldos inputsSaldos2" [ngModel]="saldo_modal_total_2"
                style="font-size: 0.8rem;width:7%;background-color: black;color: #00c600;cursor: pointer;"
                (click)="modalSaldos(almacenes_saldoss.codalmsald2, 2);" [readOnly]="true" placeholder="0.00">

              <span style="padding: 3px 5px 0px 3px;"><strong>{{ almacenes_saldoss.codalmsald3 }}:</strong></span>
              <input type="text" class="inputsSaldos inputsSaldos2" [ngModel]="saldo_modal_total_3"
                style="font-size: 0.8rem;width:7%;background-color: black;color: #00c600;cursor: pointer;"
                (click)="modalSaldos(almacenes_saldoss.codalmsald3, 3);" [readOnly]="true" placeholder="0.00">

              <span style="padding: 3px 5px 0px 3px;"><strong>{{ almacenes_saldoss.codalmsald4 }}:</strong></span>
              <input type="text" class="inputsSaldos inputsSaldos2" [ngModel]="saldo_modal_total_4"
                style="font-size: 0.8rem;width:7%;background-color: black;color: #00c600;cursor: pointer;"
                (click)="modalSaldos(almacenes_saldoss.codalmsald4, 4);" [readOnly]="true" placeholder="0.00">

              <span style="padding: 3px 5px 0px 3px;"><strong>{{ almacenes_saldoss.codalmsald5 }}:</strong></span>
              <input type="text" class="inputsSaldos inputsSaldos2" [ngModel]="saldo_modal_total_5"
                style="font-size: 0.8rem;width:7%;background-color: black;color: #00c600;cursor: pointer;"
                (click)="modalSaldos(almacenes_saldoss.codalmsald5, 5);" [readOnly]="true" placeholder="0.00">
            </ng-container>
          </div>
          <!-- finSaldos -->

          <!-- Empaques Minimo-->
          <div class="row">
            <div class="input-group" style="width: 63.2% !important;padding-left: 7px;">
              <span class="input-group-text form-control-sm">Empaque Minimo</span>

              <div type="text" class="form-control form-control-sm inputsSaldos"
                style="width: 1% !important;text-align: right;">
                {{ item_obtenido.empaqueminimo }}
              </div> &nbsp;|&nbsp;

              <span class="input-group-text form-control-sm">Peso Minimo</span>
              <div type="text" class="form-control form-control-sm inputsSaldos"
                style="width: 1% !important;text-align: right;">
                {{ item_obtenido.pesominimo }}
              </div>

              <ng-container *ngIf="item_obtenido.penalizadoText === '';else penalizado">
                <div type="text" class="form-control form-control-sm inputsSaldos"
                  style="width: 1% !important;text-align: right;">
                  no penalizado
                </div> &nbsp;|&nbsp;
              </ng-container>

              <ng-template #penalizado>
                <div type="text" class="form-control form-control-sm inputsSaldos"
                  style="width: 1% !important;text-align: right;">
                  {{ item_obtenido.penalizadoText }}
                </div> &nbsp;|&nbsp;
              </ng-template>

              <div type="text" class="form-control form-control-sm inputsSaldos"
                style="width: 14.5% !important;text-align: center;">
                {{ porcen_item }}
              </div>
            </div>
          </div>
          <!-- finempaque Minimo-->

          <!-- Empaques -->
          <div class="row">
            <div class="input-group" style="padding-left: 7px;">
              <span class="input-group-text form-control-sm">Empaques</span>

              <ng-container *ngIf="!empaque_view; else empaque_view">
                <div type="text" class="form-control form-control-sm inputsSaldos"> </div>
              </ng-container>&nbsp;

              <ng-template #empaque_view>
                <div *ngFor="let empaquesItems of empaquesItem">
                  <div type="text" class="form-control form-control-sm inputsSaldos" style="width: 100% !important;">
                    ({{empaquesItems.codigo}}){{empaquesItems.descripcion}}-{{empaquesItems.cantidad }}
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
          <!-- finempaque -->

          <!-- BUSCADOR GENERAL AVANZADO -->
          <div class="row pb-2">
            <div class="input-group" style="padding-left: 7px;"><span class="input-group-text form-control-sm">ID</span>
              <mat-form-field class="mat-mdc-form-field"
                style="width: 280px !important; background-color: white !important;">
                <mat-select [(ngModel)]="num_idd">
                  <mat-option *ngFor="let ids_complementar_proformas of ids_complementar_proforma"
                    [value]="ids_complementar_proformas.id">
                    {{ ids_complementar_proformas.id }} - {{ ids_complementar_proformas.descripcion }}
                    <hr>
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <div style="width: 15% !important; padding-right: 5px;">
                <input type="number" placeholder="0" [(ngModel)]="num_id" class="form-control form-control-sm"
                  style="margin-left: 5px;" id="input_search">
              </div>
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-primary form-control-sm" (click)="transferirProforma()"
                  style="border-color: #ffc107;">
                  <i class="fa fa-search"></i>
                </button>
                <button style="height: 20px !important; font-size: 0.8rem; background-color: #fbd800;"
                  (click)="modalBuscadorAvanzado()" class="mdc-button mdc-button--raised">
                  <span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span>
                  <span class="mdc-button__label">
                    <i class="fa fa-search"></i> Busqueda Avanzada</span>
                </button>
              </div>
            </div>
          </div>
          <!-- FIN BUSCADOR GENERAL AVANZADO -->
        </div>

        <div class="col-md-2">
          <button mat-raised-button style="height: 20px !important;font-size: 0.8rem;background-color: #fbd800;"
            (click)="modalClienteEtiqueta(direccion);">
            <!-- [disabled]="!codigo_cliente" -->
            <mat-icon style="margin-left: 10px;margin-right: 10px;">flip_to_front</mat-icon> Etiqueta
          </button>
          <button mat-raised-button style="height: 20px !important;font-size: 0.8rem;background-color: #fbd800;
            min-width: 45px !important;" (click)="limpiarEtiqueta();" matTooltipClass="custom-tooltip"
            matTooltip="Limpiar Etiqueta">
            <i class="fa fa-eraser"></i>
          </button>
          <button mat-raised-button style="height: 20px !important;font-size: 0.8rem;background-color: #fbd800;">
            <mat-icon style="margin-left: 10px;margin-right: 10px;">flip_to_front</mat-icon>
            Solicitar Urgente
          </button>
        </div>
      </div>
    </div><br>
  </div>

  <app-footer class="no-printme"></app-footer>
  <app-control-sidebar class="no-printme"></app-control-sidebar>
</section>
